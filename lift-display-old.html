<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Canvas 39 - Elevator Air Quality Display</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        @font-face {
            font-family: 'Roman';
            src: url('./fonts/Roman.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        
        body {
            font-family: 'Inter', 'Roman', 'Cormorant Garamond', sans-serif;
            overflow: hidden;
            font-weight: 300;
        }
        
        /* Main container styling - Simple approach */
        .elevator-display {
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }
        
        /* Force full height on body and html */
        html, body {
            height: 100%;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }
        
        /* Header section - Fixed height */
        .header-section {
            background: linear-gradient(135deg, #92400e, #b45309);
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 120px;
        }
        
        /* Building section - Fixed height */
        .building-section {
            position: relative;
            background: linear-gradient(135deg, #0ea5e9, #0284c7);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: calc(100vh - 360px);
            min-height: 120px;
        }
        
        /* Building section tablet optimizations */
        @media (min-width: 768px) and (max-width: 1024px) {
            .building-section {
                min-height: 120px;
                max-height: 180px;
            }
        }
        
        /* Force building section to NOT expand in fullscreen */
        :fullscreen .building-section,
        :-webkit-full-screen .building-section,
        :-moz-full-screen .building-section {
            flex: none !important;
            height: 80px !important;
            min-height: 80px !important;
            max-height: 80px !important;
        }
        
        /* iPad specific optimizations */
        @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: portrait) {
            :fullscreen .header-section,
            :-webkit-full-screen .header-section,
            :-moz-full-screen .header-section {
                min-height: 40px !important;
                max-height: 40px !important;
                padding: 0.25rem 1rem !important;
            }
            
            :fullscreen .weather-section,
            :-webkit-full-screen .weather-section,
            :-moz-full-screen .weather-section {
                height: 50px !important;
                max-height: 50px !important;
            }
            
            :fullscreen .building-section,
            :-webkit-full-screen .building-section,
            :-moz-full-screen .building-section {
                height: 50px !important;
                min-height: 50px !important;
                max-height: 50px !important;
            }
            
            :fullscreen .air-quality-section,
            :fullscreen .water-quality-section,
            :-webkit-full-screen .air-quality-section,
            :-webkit-full-screen .water-quality-section {
                padding: 0.25rem 0.75rem !important;
            }
            
            :fullscreen .quality-card,
            :-webkit-full-screen .quality-card,
            :-moz-full-screen .quality-card {
                padding: 0.25rem 0.5rem !important;
            }
        }
        
        /* Weather section - Fixed height */
        .weather-section {
            height: 100px;
            background: #f3f4f6;
            border-top: 2px solid #d1d5db;
            display: flex;
        }
        
        /* Bottom sections - Fixed height */
        .bottom-sections {
            height: 160px;
            display: flex;
            flex-direction: column;
        }
        
        /* Air quality section - Fixed height */
        .air-quality-section {
            background: linear-gradient(135deg, #b45309, #92400e);
            padding: 1rem 1.5rem;
            height: 80px;
        }
        
        /* Water quality section - Fixed height */
        .water-quality-section {
            background: linear-gradient(135deg, #d97706, #b45309);
            padding: 1rem 1.5rem;
            height: 80px;
        }
        
        /* Logo styling */
        .logo-container {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .logo-container:hover {
            transform: scale(1.05);
        }
        
        /* Weather cards */
        .weather-today {
            flex: 1;
            padding: 1.5rem;
            background: #e5e7eb;
        }
        
        .weather-forecast {
            flex: 2;
            padding: 1.5rem;
            background: #d1d5db;
        }
        
        /* AQI and water quality cards */
        .quality-card {
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: white;
            position: relative;
            overflow: hidden;
            font-weight: 300;
        }
        
        .quality-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
        }
        
        /* Color classes for AQI */
        .aqi-good { background: linear-gradient(135deg, #059669, #047857); }
        .aqi-moderate { background: linear-gradient(135deg, #d97706, #b45309); }
        .aqi-unhealthy { background: linear-gradient(135deg, #dc2626, #b91c1c); }
        .aqi-hazardous { background: linear-gradient(135deg, #7c2d12, #581c87); }
        
        /* Water quality colors */
        .water-ph { background: linear-gradient(135deg, #059669, #047857); }
        .water-chlorine { background: linear-gradient(135deg, #2563eb, #1d4ed8); }
        
        /* Notice overlay */
        .notice-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        
        .notice-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            max-width: 350px;
            margin: 1rem;
            text-align: center;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        /* Responsive adjustments */
        @media (max-height: 900px) {
            .weather-section { height: 120px; }
            .header-section { min-height: 100px; padding: 1rem 1.5rem; }
        }
        
        @media (max-height: 768px) {
            .weather-section { height: 100px; }
            .building-section { min-height: 150px; }
            .air-quality-section, .water-quality-section { padding: 1rem 1.5rem; }
        }
        
        @media (max-width: 768px) {
            .header-section { padding: 1rem; }
            .logo-container { width: 60px; height: 60px; }
            .weather-today, .weather-forecast { padding: 1rem; }
        }
        
        /* Tablet portrait mode optimizations */
        @media (max-width: 1024px) and (orientation: portrait) {
            .header-section {
                min-height: 80px !important;
                padding: 0.75rem 1rem !important;
            }
            
            .weather-section {
                height: 90px !important;
            }
            
            .building-section {
                min-height: 100px !important;
                max-height: 140px !important;
                flex: 1 !important;
            }
            
            .air-quality-section,
            .water-quality-section {
                padding: 0.75rem 1rem !important;
            }
            
            .quality-card {
                padding: 0.75rem 1rem !important;
            }
            
            .logo-container {
                width: 60px !important;
                height: 60px !important;
            }
            
            .weather-today,
            .weather-forecast {
                padding: 0.75rem !important;
            }
            
            /* Force bottom sections to fit */
            .bottom-sections {
                flex-shrink: 0 !important;
                max-height: calc(100vh - 290px) !important;
                overflow: visible !important;
            }
        }
        
        /* Extra small tablet portrait (iPad mini, etc.) */
        @media (max-width: 768px) and (orientation: portrait) and (max-height: 1024px) {
            .header-section {
                min-height: 70px !important;
                padding: 0.5rem 1rem !important;
            }
            
            .weather-section {
                height: 80px !important;
            }
            
            .building-section {
                min-height: 100px !important;
            }
            
            .air-quality-section,
            .water-quality-section {
                padding: 0.5rem 1rem !important;
            }
            
            .quality-card {
                padding: 0.5rem 0.75rem !important;
            }
            
            .bottom-sections {
                max-height: calc(100vh - 250px) !important;
            }
            
            /* Compact text for small screens */
            .header-section .text-2xl {
                font-size: 1.25rem !important;
            }
            
            .header-section .text-4xl {
                font-size: 2rem !important;
            }
        }
        
        /* Prevent scrolling */
        body {
            position: fixed;
            width: 100%;
            height: 100%;
            overscroll-behavior: none;
            background: white;
        }
        
        /* Fullscreen button */
        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 8px;
            color: #374151;
            font-size: 20px;
            cursor: pointer;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .fullscreen-btn:hover {
            background: white;
            transform: scale(1.05);
        }
        
        /* Fullscreen mode optimizations - Desktop */
        :fullscreen .elevator-display,
        :-webkit-full-screen .elevator-display,
        :-moz-full-screen .elevator-display {
            height: 100vh !important;
            max-height: 100vh !important;
            overflow: hidden !important;
        }
        
        :fullscreen .header-section,
        :-webkit-full-screen .header-section,
        :-moz-full-screen .header-section {
            min-height: 80px !important;
            padding: 0.75rem 1.5rem !important;
            flex-shrink: 0 !important;
        }
        
        :fullscreen .weather-section,
        :-webkit-full-screen .weather-section,
        :-moz-full-screen .weather-section {
            height: 90px !important;
            flex-shrink: 0 !important;
        }
        
        :fullscreen .bottom-sections,
        :-webkit-full-screen .bottom-sections,
        :-moz-full-screen .bottom-sections {
            flex-shrink: 0 !important;
            overflow: visible !important;
            max-height: none !important;
        }
        
        :fullscreen .air-quality-section,
        :-webkit-full-screen .air-quality-section,
        :-moz-full-screen .air-quality-section {
            padding: 0.75rem 1.5rem !important;
        }
        
        :fullscreen .water-quality-section,
        :-webkit-full-screen .water-quality-section,
        :-moz-full-screen .water-quality-section {
            padding: 0.75rem 1.5rem !important;
        }
        
        :fullscreen .quality-card,
        :-webkit-full-screen .quality-card,
        :-moz-full-screen .quality-card {
            padding: 0.75rem 1rem !important;
        }
        
        /* Fullscreen mode optimizations - Tablet Portrait */
        @media (max-width: 1024px) and (orientation: portrait) {
            :fullscreen .elevator-display,
            :-webkit-full-screen .elevator-display,
            :-moz-full-screen .elevator-display {
                display: flex !important;
                flex-direction: column !important;
                height: 100vh !important;
                overflow: hidden !important;
            }
            
            :fullscreen .header-section,
            :-webkit-full-screen .header-section,
            :-moz-full-screen .header-section {
                min-height: 50px !important;
                max-height: 50px !important;
                padding: 0.25rem 1rem !important;
                flex-shrink: 0 !important;
            }
            
            :fullscreen .weather-section,
            :-webkit-full-screen .weather-section,
            :-moz-full-screen .weather-section {
                height: 60px !important;
                max-height: 60px !important;
                flex-shrink: 0 !important;
            }
            
            :fullscreen .building-section,
            :-webkit-full-screen .building-section,
            :-moz-full-screen .building-section {
                flex: none !important;
                height: 60px !important;
                min-height: 60px !important;
                max-height: 60px !important;
            }
            
            :fullscreen .bottom-sections,
            :-webkit-full-screen .bottom-sections,
            :-moz-full-screen .bottom-sections {
                flex-shrink: 0 !important;
                height: auto !important;
                max-height: calc(100vh - 170px) !important;
                overflow: visible !important;
            }
            
            :fullscreen .air-quality-section,
            :-webkit-full-screen .air-quality-section,
            :-moz-full-screen .air-quality-section {
                padding: 0.25rem 1rem !important;
                min-height: auto !important;
            }
            
            :fullscreen .water-quality-section,
            :-webkit-full-screen .water-quality-section,
            :-moz-full-screen .water-quality-section {
                padding: 0.25rem 1rem !important;
                min-height: auto !important;
            }
            
            :fullscreen .quality-card,
            :-webkit-full-screen .quality-card,
            :-moz-full-screen .quality-card {
                padding: 0.25rem 0.5rem !important;
            }
            
            :fullscreen .weather-today,
            :fullscreen .weather-forecast,
            :-webkit-full-screen .weather-today,
            :-webkit-full-screen .weather-forecast,
            :-moz-full-screen .weather-today,
            :-moz-full-screen .weather-forecast {
                padding: 0.25rem !important;
            }
            
            /* Compact text in fullscreen tablet */
            :fullscreen .header-section .text-2xl,
            :-webkit-full-screen .header-section .text-2xl,
            :-moz-full-screen .header-section .text-2xl {
                font-size: 1rem !important;
                margin-bottom: 0.25rem !important;
            }
            
            :fullscreen .header-section .text-4xl,
            :-webkit-full-screen .header-section .text-4xl,
            :-moz-full-screen .header-section .text-4xl {
                font-size: 1.5rem !important;
            }
            
            :fullscreen .logo-container,
            :-webkit-full-screen .logo-container,
            :-moz-full-screen .logo-container {
                width: 40px !important;
                height: 40px !important;
            }
        }
        
        /* Fullscreen mode optimizations - Small Tablet Portrait */
        @media (max-width: 768px) and (orientation: portrait) {
            :fullscreen .header-section,
            :-webkit-full-screen .header-section,
            :-moz-full-screen .header-section {
                min-height: 50px !important;
                padding: 0.25rem 0.75rem !important;
            }
            
            :fullscreen .weather-section,
            :-webkit-full-screen .weather-section,
            :-moz-full-screen .weather-section {
                height: 60px !important;
            }
            
            :fullscreen .building-section,
            :-webkit-full-screen .building-section,
            :-moz-full-screen .building-section {
                flex: none !important;
                height: 40px !important;
                min-height: 40px !important;
                max-height: 40px !important;
            }
            
            :fullscreen .air-quality-section,
            :fullscreen .water-quality-section,
            :-webkit-full-screen .air-quality-section,
            :-webkit-full-screen .water-quality-section,
            :-moz-full-screen .air-quality-section,
            :-moz-full-screen .water-quality-section {
                padding: 0.25rem 0.75rem !important;
            }
            
            :fullscreen .quality-card,
            :-webkit-full-screen .quality-card,
            :-moz-full-screen .quality-card {
                padding: 0.25rem 0.5rem !important;
            }
        }
    </style>
</head>
<body>
    <!-- Fullscreen Button -->
    <button class="fullscreen-btn" onclick="toggleFullscreen()" title="Toggle Fullscreen">
        <i data-lucide="maximize"></i>
    </button>

    <div class="elevator-display">
        <!-- Header Section -->
        <div class="header-section">
            <div class="logo-container" onclick="uploadLogo()">
                <img id="logoImage" class="h-12 w-auto" style="display: none;" alt="Hotel Logo">
                <div id="logoPlaceholder" class="text-amber-800 text-center font-bold text-sm">
                    CANVAS<br>39
                </div>
            </div>
            
            <div class="text-center text-white">
                <div class="text-2xl md:text-3xl font-light mb-2" id="currentDate">
                    Wednesday, 27 November
                </div>
                <div class="text-4xl md:text-5xl font-thin tracking-wider" id="currentTime">
                    16:41
                </div>
            </div>
            
            <div style="width: 80px;"></div>
        </div>

        <!-- Building Section -->
        <div class="building-section" onclick="uploadBuilding()">
            <div class="w-full h-full bg-black bg-opacity-20 flex items-center justify-center relative">
                <div id="buildingPlaceholder" class="text-white text-center text-xl font-medium">
                    Click to upload building image
                </div>
                
                <!-- Notice Overlay -->
                <div id="noticeOverlay" class="notice-overlay" style="display: none;">
                    <div class="notice-card">
                        <div class="w-8 h-8 text-amber-500 mx-auto mb-3">
                            <i data-lucide="alert-triangle"></i>
                        </div>
                        <h2 class="text-lg font-semibold text-gray-800 mb-3" id="noticeTitle">
                            Notice
                        </h2>
                        <p class="text-sm text-gray-600" id="noticeMessage">
                            Welcome to Canvas Hotel
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Weather Section -->
        <div class="weather-section">
            <!-- Today's Weather -->
            <div class="weather-today">
                <h3 class="text-gray-600 font-medium mb-1 text-xs">TODAY</h3>
                <div class="text-center">
                    <div class="w-8 h-8 text-yellow-500 mx-auto mb-1" id="todayIcon">
                        <i data-lucide="sun"></i>
                    </div>
                    <div class="flex items-center justify-center space-x-1">
                        <div class="w-3 h-3 text-gray-600">
                            <i data-lucide="thermometer"></i>
                        </div>
                        <div class="flex items-center space-x-1">
                            <span class="text-sm font-light text-gray-700" id="lowTemp">26°C</span>
                            <span class="text-gray-500 text-xs">/</span>
                            <span class="text-sm font-light text-gray-700" id="highTemp">34°C</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Weather Forecast -->
            <div class="weather-forecast">
                <h3 class="text-gray-600 font-medium mb-1 text-xs">OUTLOOK</h3>
                <div class="grid grid-cols-4 gap-2 flex-1 items-center" id="forecastGrid">
                    <!-- Forecast items will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Bottom Sections -->
        <div class="bottom-sections">
            <!-- Air Quality Section -->
            <div class="air-quality-section">
                <div class="flex space-x-4">
                    <!-- Indoor AQI -->
                    <div class="flex-1">
                        <h3 class="text-white font-medium mb-2 text-sm">INDOOR</h3>
                        <div class="quality-card aqi-good">
                            <div class="flex items-start justify-between mb-2">
                                <div>
                                    <div class="text-2xl font-light" id="indoorAQI">40</div>
                                    <div class="text-xs opacity-90">US AQI</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-normal" id="indoorLevel">Good</div>
                                    <div class="w-4 h-4 mt-1 opacity-70">
                                        <i data-lucide="wind"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs space-y-1">
                                <div>Main pollutant: <span id="indoorPollutant">PM10</span></div>
                                <div class="text-right font-normal">
                                    <span id="indoorValue">43.5</span> <span id="indoorUnit">μg/m³</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Outdoor AQI -->
                    <div class="flex-1">
                        <h3 class="text-white font-medium mb-2 text-sm">OUTDOOR</h3>
                        <div class="quality-card aqi-moderate">
                            <div class="flex items-start justify-between mb-2">
                                <div>
                                    <div class="text-2xl font-light" id="outdoorAQI">84</div>
                                    <div class="text-xs opacity-90">US AQI</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-sm font-normal" id="outdoorLevel">Moderate</div>
                                    <div class="w-4 h-4 mt-1 opacity-70">
                                        <i data-lucide="wind"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs space-y-1">
                                <div>Main pollutant: <span id="outdoorPollutant">PM2.5</span></div>
                                <div class="text-right font-normal">
                                    <span id="outdoorValue">27</span> <span id="outdoorUnit">μg/m³</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Water Quality Section -->
            <div class="water-quality-section">
                <div class="flex space-x-4">
                    <!-- Water Quality -->
                    <div class="flex-1">
                        <h3 class="text-white font-medium mb-2 text-sm">WATER</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <div class="quality-card water-ph text-center">
                                <div class="text-xs opacity-90 mb-1">PH</div>
                                <div class="text-sm font-normal" id="waterPH">7.2</div>
                            </div>
                            <div class="quality-card water-chlorine text-center">
                                <div class="text-xs opacity-90 mb-1">CHLORINE</div>
                                <div class="text-sm font-normal" id="waterChlorine">1.8</div>
                            </div>
                        </div>
                    </div>

                    <!-- Swimming Pool Quality -->
                    <div class="flex-1">
                        <h3 class="text-white font-medium mb-2 text-sm">SWIMMING POOL</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <div class="quality-card water-ph text-center">
                                <div class="text-xs opacity-90 mb-1">PH</div>
                                <div class="text-sm font-normal" id="poolPH">7.4</div>
                            </div>
                            <div class="quality-card water-chlorine text-center">
                                <div class="text-xs opacity-90 mb-1">CHLORINE</div>
                                <div class="text-sm font-normal" id="poolChlorine">2.1</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file inputs -->
    <input type="file" id="logoInput" class="hidden" accept="image/*" onchange="handleLogoUpload(event)">
    <input type="file" id="buildingInput" class="hidden" accept="image/*" onchange="handleBuildingUpload(event)">

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Mock data exactly matching canvas39 GitHub version
        const mockData = {
            weather: {
                current: {
                    condition: "Partly Cloudy",
                    icon: "cloud",
                    temperature: 30,
                    high: 34,
                    low: 26
                },
                forecast: [
                    { time: "11:00", condition: "Sunny", icon: "sun", temperature: 32 },
                    { time: "12:00", condition: "Partly Cloudy", icon: "cloud", temperature: 33 },
                    { time: "13:00", condition: "Rainy", icon: "cloud-rain", temperature: 31 },
                    { time: "14:00", condition: "Thunderstorm", icon: "zap", temperature: 29 }
                ]
            },
            airQuality: {
                indoor: {
                    aqi: 40,
                    level: "Good",
                    mainPollutant: "PM10",
                    value: 43.5,
                    unit: "μg/m³"
                },
                outdoor: {
                    aqi: 84,
                    level: "Moderate",
                    mainPollutant: "PM2.5",
                    value: 27,
                    unit: "μg/m³"
                }
            },
            waterQuality: {
                water: {
                    ph: 7.2,
                    chlorine: 1.8
                },
                pool: {
                    ph: 7.4,
                    chlorine: 2.1
                }
            }
        };

        // Update date and time
        function updateDateTime() {
            const now = new Date();
            
            // Update time
            const timeString = now.toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit',
                hour12: false,
                timeZone: 'Asia/Bangkok'
            });
            document.getElementById('currentTime').textContent = timeString;
            
            // Update date
            const dateString = now.toLocaleDateString('en-US', { 
                weekday: 'long', 
                day: 'numeric', 
                month: 'long',
                timeZone: 'Asia/Bangkok'
            });
            document.getElementById('currentDate').textContent = dateString;
        }

        // Weather icon mapping - updated to match canvas39
        function getWeatherIconName(condition) {
            const iconMap = {
                'sunny': 'sun',
                'partly cloudy': 'cloud',
                'rainy': 'cloud-rain',
                'thunderstorm': 'zap'
            };
            return iconMap[condition.toLowerCase()] || 'cloud';
        }

        function getWeatherIconColor(condition) {
            const colorMap = {
                'sunny': 'text-yellow-500',
                'partly cloudy': 'text-gray-400',
                'rainy': 'text-blue-500',
                'thunderstorm': 'text-purple-500'
            };
            return colorMap[condition.toLowerCase()] || 'text-gray-400';
        }

        // AQI color mapping
        function getAQIClass(aqi) {
            if (aqi <= 50) return 'aqi-good';
            if (aqi <= 100) return 'aqi-moderate';
            if (aqi <= 150) return 'aqi-unhealthy';
            return 'aqi-hazardous';
        }

        // Update display with mock data
        function updateDisplay() {
            console.log('🔄 Updating display with mock data...');
            
            try {
                // Update weather
                const weather = mockData.weather;
                console.log('Weather data:', weather);
                
                document.getElementById('lowTemp').textContent = weather.current.low + '°C';
                document.getElementById('highTemp').textContent = weather.current.high + '°C';
                
                // Update today's weather icon
                const todayIconContainer = document.getElementById('todayIcon');
                console.log('Today icon container:', todayIconContainer);
                
                if (todayIconContainer) {
                    const todayIcon = todayIconContainer.querySelector('i');
                    console.log('Today icon element:', todayIcon);
                    
                    if (todayIcon) {
                        todayIcon.setAttribute('data-lucide', getWeatherIconName(weather.current.condition));
                        todayIconContainer.className = `w-8 h-8 ${getWeatherIconColor(weather.current.condition)} mx-auto mb-1`;
                        console.log('Today icon updated:', getWeatherIconName(weather.current.condition));
                    } else {
                        // Force create icon if not found
                        todayIconContainer.innerHTML = `<i data-lucide="${getWeatherIconName(weather.current.condition)}"></i>`;
                        todayIconContainer.className = `w-8 h-8 ${getWeatherIconColor(weather.current.condition)} mx-auto mb-1`;
                        console.log('Today icon recreated:', getWeatherIconName(weather.current.condition));
                    }
                } else {
                    console.error('Today icon container not found');
                }
                
                // Update forecast - using direct icon names from mock data
                const forecastGrid = document.getElementById('forecastGrid');
                if (forecastGrid) {
                    forecastGrid.innerHTML = '';
                    
                    console.log('Forecast data:', weather.forecast);
                    
                    weather.forecast.forEach((item, index) => {
                        console.log(`Forecast ${index}:`, item);
                        const forecastItem = document.createElement('div');
                        forecastItem.className = 'text-center';
                        forecastItem.innerHTML = `
                            <div class="text-xs text-gray-600 font-medium mb-1">${item.time}</div>
                            <div class="flex justify-center mb-1">
                                <div class="w-8 h-8 ${getWeatherIconColor(item.condition)}">
                                    <i data-lucide="${item.icon}"></i>
                                </div>
                            </div>
                            <div class="text-sm font-medium text-gray-700">${item.temperature}°C</div>
                        `;
                        forecastGrid.appendChild(forecastItem);
                    });
                } else {
                    console.error('Forecast grid element not found');
                }
                
                // Update AQI
                const airQuality = mockData.airQuality;
                document.getElementById('indoorAQI').textContent = airQuality.indoor.aqi;
                document.getElementById('indoorLevel').textContent = airQuality.indoor.level;
                document.getElementById('indoorPollutant').textContent = airQuality.indoor.mainPollutant;
                document.getElementById('indoorValue').textContent = airQuality.indoor.value;
                document.getElementById('indoorUnit').textContent = airQuality.indoor.unit;
                
                document.getElementById('outdoorAQI').textContent = airQuality.outdoor.aqi;
                document.getElementById('outdoorLevel').textContent = airQuality.outdoor.level;
                document.getElementById('outdoorPollutant').textContent = airQuality.outdoor.mainPollutant;
                document.getElementById('outdoorValue').textContent = airQuality.outdoor.value;
                document.getElementById('outdoorUnit').textContent = airQuality.outdoor.unit;
                
                // Update water quality
                const waterQuality = mockData.waterQuality;
                document.getElementById('waterPH').textContent = waterQuality.water.ph;
                document.getElementById('waterChlorine').textContent = waterQuality.water.chlorine;
                document.getElementById('poolPH').textContent = waterQuality.pool.ph;
                document.getElementById('poolChlorine').textContent = waterQuality.pool.chlorine;
                
                // Update AQI card classes
                updateAQICards();
                
                // Reinitialize Lucide icons
                lucide.createIcons();
                
                console.log('✅ Display updated successfully');
                
            } catch (error) {
                console.error('❌ Error updating display:', error);
            }
        }

        function updateAQICards() {
            // Update indoor AQI card
            const indoorCard = document.querySelector('[id="indoorAQI"]').closest('.quality-card');
            const indoorClass = getAQIClass(mockData.airQuality.indoor.aqi);
            indoorCard.className = `quality-card ${indoorClass}`;
            
            // Update outdoor AQI card
            const outdoorCard = document.querySelector('[id="outdoorAQI"]').closest('.quality-card');
            const outdoorClass = getAQIClass(mockData.airQuality.outdoor.aqi);
            outdoorCard.className = `quality-card ${outdoorClass}`;
        }

        // Image upload functions
        function uploadLogo() {
            document.getElementById('logoInput').click();
        }

        function uploadBuilding() {
            document.getElementById('buildingInput').click();
        }

        function handleLogoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const logoImage = document.getElementById('logoImage');
                    const logoPlaceholder = document.getElementById('logoPlaceholder');
                    
                    logoImage.src = e.target.result;
                    logoImage.style.display = 'block';
                    logoPlaceholder.style.display = 'none';
                    
                    localStorage.setItem('canvas39_logo', e.target.result);
                };
                reader.readAsDataURL(file);
            }
        }

        function handleBuildingUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const buildingSection = document.querySelector('.building-section');
                    const buildingPlaceholder = document.getElementById('buildingPlaceholder');
                    
                    buildingSection.style.backgroundImage = `url(${e.target.result})`;
                    buildingPlaceholder.style.display = 'none';
                    
                    localStorage.setItem('canvas39_building', e.target.result);
                };
                reader.readAsDataURL(file);
            }
        }

        function loadStoredImages() {
            // Load logo
            const storedLogo = localStorage.getItem('canvas39_logo');
            if (storedLogo) {
                const logoImage = document.getElementById('logoImage');
                const logoPlaceholder = document.getElementById('logoPlaceholder');
                
                logoImage.src = storedLogo;
                logoImage.style.display = 'block';
                logoPlaceholder.style.display = 'none';
            }
            
            // Load building image
            const storedBuilding = localStorage.getItem('canvas39_building');
            if (storedBuilding) {
                const buildingSection = document.querySelector('.building-section');
                const buildingPlaceholder = document.getElementById('buildingPlaceholder');
                
                buildingSection.style.backgroundImage = `url(${storedBuilding})`;
                buildingPlaceholder.style.display = 'none';
            }
        }

        // Notice functions
        function showNotice(title = "Notice", message = "Welcome to Canvas Hotel") {
            document.getElementById('noticeTitle').textContent = title;
            document.getElementById('noticeMessage').textContent = message;
            document.getElementById('noticeOverlay').style.display = 'flex';
        }

        function hideNotice() {
            document.getElementById('noticeOverlay').style.display = 'none';
        }

        // Fullscreen functionality
        function toggleFullscreen() {
            if (!document.fullscreenElement && 
                !document.webkitFullscreenElement && 
                !document.mozFullScreenElement) {
                // Enter fullscreen
                const element = document.documentElement;
                if (element.requestFullscreen) {
                    element.requestFullscreen().catch(err => {
                        console.log(`Error attempting to enable fullscreen: ${err.message}`);
                    });
                } else if (element.webkitRequestFullscreen) {
                    element.webkitRequestFullscreen();
                } else if (element.mozRequestFullScreen) {
                    element.mozRequestFullScreen();
                } else if (element.msRequestFullscreen) {
                    element.msRequestFullscreen();
                }
            } else {
                // Exit fullscreen
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            switch(e.key.toLowerCase()) {
                case 'n':
                    showNotice("Pool Maintenance", "Pool maintenance scheduled for 3:00 PM today. Thank you for your understanding.");
                    break;
                case 'h':
                    hideNotice();
                    break;
                case 'r':
                    updateDisplay();
                    break;
                case 'f':
                    toggleFullscreen();
                    break;
                case 'd':
                    debugLayout();
                    break;
                case 't':
                    forceTabletFullscreenLayout();
                    break;
            }
        });

        // Debug layout function
        function debugLayout() {
            const viewport = { width: window.innerWidth, height: window.innerHeight };
            const isFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement);
            const orientation = window.innerWidth > window.innerHeight ? 'landscape' : 'portrait';
            
            console.log('📱 Layout Debug:');
            console.log('- Viewport:', viewport);
            console.log('- Fullscreen:', isFullscreen);
            console.log('- Orientation:', orientation);
            
            if (isFullscreen) {
                const header = document.querySelector('.header-section');
                const weather = document.querySelector('.weather-section');
                const building = document.querySelector('.building-section');
                const bottomSections = document.querySelector('.bottom-sections');
                const waterSection = document.querySelector('.water-quality-section');
                
                console.log('📏 Section Heights:');
                console.log('- Header:', header?.getBoundingClientRect().height);
                console.log('- Weather:', weather?.getBoundingClientRect().height);
                console.log('- Building:', building?.getBoundingClientRect().height);
                console.log('- Bottom sections:', bottomSections?.getBoundingClientRect().height);
                console.log('- Water section:', waterSection?.getBoundingClientRect().height);
                
                const waterRect = waterSection?.getBoundingClientRect();
                if (waterRect) {
                    const isWaterVisible = waterRect.bottom <= window.innerHeight;
                    console.log('💧 Water Section:');
                    console.log('- Top:', waterRect.top);
                    console.log('- Bottom:', waterRect.bottom);
                    console.log('- Fully visible:', isWaterVisible ? '✅ YES' : '❌ NO');
                    if (!isWaterVisible) {
                        console.log('- Cut off by:', waterRect.bottom - window.innerHeight, 'px');
                    }
                }
            }
        }
        
        // Force tablet fullscreen layout
        function forceTabletFullscreenLayout() {
            if (window.innerWidth <= 1024 && window.innerHeight > window.innerWidth) {
                const isFullscreen = !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement);
                
                if (isFullscreen) {
                    console.log('🔧 Forcing tablet fullscreen layout...');
                    
                    // Force styles with JavaScript
                    const style = document.createElement('style');
                    style.id = 'force-tablet-layout';
                    style.innerHTML = `
                        body:fullscreen .header-section,
                        body:-webkit-full-screen .header-section {
                            height: 40px !important;
                            min-height: 40px !important;
                            max-height: 40px !important;
                            padding: 0.25rem 1rem !important;
                        }
                        
                        body:fullscreen .weather-section,
                        body:-webkit-full-screen .weather-section {
                            height: 50px !important;
                            max-height: 50px !important;
                        }
                        
                        body:fullscreen .building-section,
                        body:-webkit-full-screen .building-section {
                            height: 80px !important;
                            min-height: 80px !important;
                            max-height: 80px !important;
                            flex: none !important;
                        }
                        
                        body:fullscreen .bottom-sections,
                        body:-webkit-full-screen .bottom-sections {
                            height: calc(100vh - 170px) !important;
                            max-height: calc(100vh - 170px) !important;
                            overflow: visible !important;
                        }
                        
                        body:fullscreen .air-quality-section,
                        body:fullscreen .water-quality-section,
                        body:-webkit-full-screen .air-quality-section,
                        body:-webkit-full-screen .water-quality-section {
                            padding: 0.25rem 1rem !important;
                        }
                    `;
                    
                    // Remove existing force style
                    const existing = document.getElementById('force-tablet-layout');
                    if (existing) existing.remove();
                    
                    document.head.appendChild(style);
                    
                    setTimeout(debugLayout, 100);
                }
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Canvas 39 Elevator Display initializing...');
            
            // Wait for Lucide icons to fully load
            setTimeout(() => {
                // Initialize everything
                updateDateTime();
                updateDisplay();
                loadStoredImages();
            }, 100);
            
            // Start clock
            setInterval(updateDateTime, 1000);
            
            // Auto refresh display every 5 minutes
            setInterval(updateDisplay, 5 * 60 * 1000);
            
            // Demo notice every 30 seconds
            setInterval(() => {
                const isVisible = document.getElementById('noticeOverlay').style.display === 'flex';
                if (isVisible) {
                    hideNotice();
                } else {
                    showNotice("Maintenance Notice", "Swimming pool will be closed for maintenance from 2:00 PM to 4:00 PM today.");
                }
            }, 30000);
            
            // Prevent touch scrolling
            document.addEventListener('touchmove', function(e) {
                e.preventDefault();
            }, { passive: false });
            
            console.log('✅ Canvas 39 GitHub Design mockup loaded successfully');
            console.log('⌨️ Keyboard shortcuts: n=notice, h=hide notice, r=reload, f=fullscreen, d=debug');
        });

        // Handle fullscreen changes
        function handleFullscreenChange() {
            const fullscreenBtn = document.querySelector('.fullscreen-btn i');
            const isFullscreen = !!(document.fullscreenElement || 
                                   document.webkitFullscreenElement || 
                                   document.mozFullScreenElement);
            
            if (isFullscreen) {
                fullscreenBtn.setAttribute('data-lucide', 'minimize');
                console.log('✅ เข้าสู่โหมดเต็มจอแล้ว');
                
                // Force tablet layout after entering fullscreen
                setTimeout(() => {
                    forceTabletFullscreenLayout();
                }, 200);
            } else {
                fullscreenBtn.setAttribute('data-lucide', 'maximize');
                console.log('✅ ออกจากโหมดเต็มจอแล้ว');
                
                // Remove forced styles when exiting fullscreen
                const forcedStyle = document.getElementById('force-tablet-layout');
                if (forcedStyle) forcedStyle.remove();
            }
            lucide.createIcons();
        }
        
        // Add multiple event listeners for cross-browser compatibility
        document.addEventListener('fullscreenchange', handleFullscreenChange);
        document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
        document.addEventListener('mozfullscreenchange', handleFullscreenChange);
        document.addEventListener('msfullscreenchange', handleFullscreenChange);
    </script>
</body>
</html>