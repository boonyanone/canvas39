# üö® API Files Recovery - ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô

## ‚úÖ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏ü‡∏•‡πå API ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

### üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:

1. **`api/upload-image.php`** (11.3 KB)
   - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ Logo ‡πÅ‡∏•‡∏∞ Building
   - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö
   - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® (CRUD operations)
   - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

2. **`api/lift-display-data.php`** (10.2 KB)
   - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• AQI (Indoor/Outdoor)
   - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®
   - ‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
   - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö OpenWeatherMap API

3. **`api/get-notices.php`** (1.1 KB)
   - Proxy ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
   - ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö upload-image.php

4. **`api/air-quality-multi.php`** (13.4 KB)
   - ‡∏£‡∏∞‡∏ö‡∏ö Multi-source AQI ‡πÄ‡∏î‡∏¥‡∏°
   - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Device API, Public Scraping, City API
   - Auto-fallback system

5. **`api/config.php`** (1.6 KB)
   - ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
   - ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API keys
   - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠

6. **`api/test.php`** (‡πÉ‡∏´‡∏°‡πà)
   - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö API
   - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ endpoints

### üóÇÔ∏è ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á:

1. **`lift_display_settings`**
   - ‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö
   - logo_image, building_image paths

2. **`lift_display_images`** 
   - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î
   - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö versioning

3. **`lift_display_notices`**
   - ‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
   - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö start_time/end_time

### üîå API Endpoints ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:

#### Test API:
```
GET  /api/test.php
```

#### ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å:
```
GET  /api/lift-display-data.php
```

#### ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û:
```
POST /api/upload-image.php
Body: {"type": "logo|building", "image": "base64_data"}
```

#### ‡∏î‡∏π‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÅ‡∏•‡πâ‡∏ß:
```
POST /api/upload-image.php
Body: {"action": "get_images"}
```

#### ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®:
```
POST /api/upload-image.php
Body: {"action": "save_notice", "title": "...", "message": "..."}

POST /api/upload-image.php  
Body: {"action": "get_notices"}
```

#### AQI Multi-source:
```
POST /api/air-quality-multi.php
Body: {"sources": [...]}
```

### üéØ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• AQI ‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡πÑ‡∏î‡πâ:

**Outdoor AQI Sources:**
1. Device API: `https://device.iqair.com/v2/6790850e7307e18fb3e0c815/validated-data`
2. Public Scraping: IQAir Canvas 39 page
3. City API: IQAir Bangkok (fallback)

**Indoor AQI:**
- ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á (‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ outdoor 20-40%)
- **TODO**: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ indoor sensor ‡∏à‡∏£‡∏¥‡∏á

### ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥:

1. **Weather API** (‡πÉ‡∏ô `lift-display-data.php`):
```php
$apiKey = 'your-openweather-api-key'; // ‡πÉ‡∏™‡πà API key ‡∏à‡∏£‡∏¥‡∏á
```

2. **Database**: 
   - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
   - ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°

3. **Upload Directory**:
```bash
chmod 755 uploads/lift-display/
```

### üß™ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö:

```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
curl http://your-domain/api/test.php

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
curl http://your-domain/api/lift-display-data.php

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
curl http://your-domain/api/get-notices.php
```

### üì± ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:

- **‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏•‡∏¥‡∏ü‡∏ó‡πå**: `lift-display.html`
- **Admin Panel**: `lift-admin.html`

### üéâ ‡∏™‡∏£‡∏∏‡∏õ:

‚úÖ **‡πÑ‡∏ü‡∏•‡πå API ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô** - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà 6 ‡πÑ‡∏ü‡∏•‡πå  
‚úÖ **‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö** - ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ, ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®, ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•  
‚úÖ **Database Ready** - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥  
‚úÖ **Multi-source AQI** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 3 ‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•  
‚úÖ **Weather Integration** - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö OpenWeatherMap  

**‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!** üöÄ

---

*‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏°‡∏∑‡πà‡∏≠: $(date)*