<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas 39 - Admin Panel</title>
    
    <!-- Tailwind CSS -->
    <script>
        // ‡∏õ‡∏¥‡∏î warning console  
        (function() {
            const originalWarn = console.warn;
            console.warn = function(...args) {
                const message = args.join(' ');
                if (message.includes('tailwindcss.com should not be used in production') || 
                    message.includes('cdn.tailwindcss.com should not be used in production') ||
                    message.includes('Firebase error. Please ensure that you have the URL') ||
                    message.includes('FIREBASE WARNING')) {
                    return; // ‡∏ã‡πà‡∏≠‡∏ô warning ‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ
                }
                originalWarn.apply(console, args);
            };
        })();
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Navigation cards styling */
        .nav-cards-container {
            position: sticky;
            top: 0;
            z-index: 50;
            background: white;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }
        
        .nav-card.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border-color: #2563eb;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.4);
        }
        
        .nav-card.active .group-hover\:bg-gray-200,
        .nav-card.active .group-hover\:bg-blue-200,
        .nav-card.active .group-hover\:bg-orange-200 {
            background: rgba(255, 255, 255, 0.2) !important;
        }
        
        .nav-card.active h4,
        .nav-card.active p {
            color: white !important;
        }
        
        .nav-card.active svg {
            color: white !important;
        }
        
        .nav-card.active .bg-green-400,
        .nav-card.active .bg-blue-400,
        .nav-card.active .bg-orange-400 {
            background: rgba(255, 255, 255, 0.8) !important;
        }
    </style>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <!-- Quill.js Rich Text Editor -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    
    <!-- JSONBin.io + Firebase Configuration -->
    <script>
        // JSONBin.io Configuration (Primary)
        const JSONBIN_CONFIG = {
            binId: '68d0fd7643b1c97be94b2806',
            masterKey: '$2a$10$lnTysFoBV2rtQhF5La5LVeRNVW4wRHNmotQgoxvsd2vUL5dB8p4Pq',
            accessKey: '$2a$10$9izErv0jJeqLJODXAxr15ugm42tS.ibw1QqZdOLFV.3XNeBNVsCda'
        };
        
        console.log('üì¶ JSONBin.io configured (Primary)');
    </script>
    
    <!-- Firebase SDK (Backup) -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, get } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        
        const firebaseConfig = {
            apiKey: "AIzaSyDJ2iqJUyjd5m0xe0rz-IyRiNyCD3Ga8XM",
            authDomain: "canvas39-display.firebaseapp.com",
            databaseURL: "https://canvas39-display-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "canvas39-display",
            storageBucket: "canvas39-display.firebasestorage.app",
            messagingSenderId: "126886607717",
            appId: "1:126886607717:web:01029a9d874d87dfc5bf8c"
        };
        
        try {
            const app = initializeApp(firebaseConfig);
            const database = getDatabase(app);
            
            // Make Firebase functions globally available
            window.firebaseDB = database;
            window.firebaseRef = ref;
            window.firebaseSet = set;
            window.firebaseGet = get;
            
            console.log('üî• Firebase initialized (Backup)');
        } catch (error) {
            console.warn('‚ö†Ô∏è Firebase backup not available:', error);
        }
    </script>
</head>
<body class="bg-gray-100">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <h1 class="text-xl font-semibold text-gray-900">Canvas 39 Admin Panel</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- User Info -->
                        <div class="flex items-center space-x-3">
                            <div class="text-sm text-gray-700">
                                <span>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, </span>
                                <span id="currentUserName" class="font-medium">Admin</span>
                            </div>
                            <div class="h-8 w-px bg-gray-300"></div>
                        </div>
                        
                        <button id="saveBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center">
                            <i data-lucide="save" class="w-4 h-4 mr-2"></i>
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤
                        </button>
                        
                        <!-- User Menu -->
                        <div class="relative">
                            <button id="userMenuBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-md text-sm font-medium flex items-center">
                                <i data-lucide="user" class="w-4 h-4 mr-2"></i>
                                <i data-lucide="chevron-down" class="w-4 h-4"></i>
                            </button>
                            <div id="userMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50">
                                <a href="#" id="userManagementBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i data-lucide="users" class="w-4 h-4 mr-2 inline"></i>
                                    ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                                </a>
                                <div class="border-t border-gray-100"></div>
                                <a href="#" id="logoutBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                                    <i data-lucide="log-out" class="w-4 h-4 mr-2 inline"></i>
                                    ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            <!-- Section Title -->
            <div class="mb-6">
                <div class="bg-white overflow-hidden shadow rounded-lg">
                    <div class="px-6 py-4 bg-gradient-to-r from-gray-700 to-gray-800 border-b">
                        <h3 class="text-lg font-medium text-white flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                            </svg>
                            ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </h3>
                        <p class="text-gray-100 text-sm mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Cards (Sticky) -->
            <div class="nav-cards-container mb-6">
                        <div class="grid grid-cols-3 lg:grid-cols-6 gap-2">
                            <!-- Header & Theme Card -->
                            <div id="card-theme" data-target="theme" onclick="scrollToSection('theme')" class="nav-card group cursor-pointer bg-white rounded-lg border border-gray-200 p-2 hover:shadow-md transition-all duration-200 hover:border-gray-300 hover:-translate-y-0.5">
                                <div class="flex flex-col items-center text-center">
                                    <div class="w-6 h-6 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-gray-200 transition-colors mb-1.5">
                                        <svg class="w-3 h-3 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v11a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H4zm0 2v2h12V4H4zm0 4v6h12V8H4z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h4 class="font-medium text-xs text-gray-900 group-hover:text-gray-700 mb-1">Header & Colors</h4>
                                    <p class="text-xs text-gray-500 text-center leading-tight">‡∏™‡∏µ ‡πÇ‡∏•‡πÇ‡∏Å‡πâ</p>
                                </div>
                            </div>


                            <!-- Text & Typography Card -->
                            <div id="card-text" data-target="text" onclick="scrollToSection('text')" class="nav-card group cursor-pointer bg-white rounded-lg border border-gray-200 p-2 hover:shadow-md transition-all duration-200 hover:border-gray-300 hover:-translate-y-0.5">
                                <div class="flex flex-col items-center text-center">
                                    <div class="w-6 h-6 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-200 transition-colors mb-1.5">
                                        <svg class="w-3 h-3 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                                        </svg>
                                    </div>
                                    <h4 class="font-medium text-xs text-gray-900 group-hover:text-gray-700 mb-1">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</h4>
                                    <p class="text-xs text-gray-500 text-center leading-tight">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ ‡∏ü‡∏≠‡∏ô‡∏ï‡πå</p>
                                </div>
                            </div>

                            <!-- Quality Data Card -->
                            <div id="card-quality" data-target="quality" onclick="scrollToSection('quality')" class="nav-card group cursor-pointer bg-white rounded-lg border border-gray-200 p-2 hover:shadow-md transition-all duration-200 hover:border-gray-300 hover:-translate-y-0.5">
                                <div class="flex flex-col items-center text-center">
                                    <div class="w-6 h-6 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-gray-200 transition-colors mb-1.5">
                                        <svg class="w-3 h-3 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.30z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h4 class="font-medium text-xs text-gray-900 group-hover:text-gray-700 mb-1">Data & API</h4>
                                    <p class="text-xs text-gray-500 text-center leading-tight">Weather AQI</p>
                                </div>
                            </div>

                            <!-- Notification Card -->
                            <div id="card-notification" data-target="notification" onclick="scrollToSection('notification')" class="nav-card group cursor-pointer bg-white rounded-lg border border-gray-200 p-2 hover:shadow-md transition-all duration-200 hover:border-gray-300 hover:-translate-y-0.5">
                                <div class="flex flex-col items-center text-center">
                                    <div class="w-6 h-6 bg-orange-100 rounded-lg flex items-center justify-center group-hover:bg-orange-200 transition-colors mb-1.5">
                                        <svg class="w-3 h-3 text-orange-600" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"/>
                                        </svg>
                                    </div>
                                    <h4 class="font-medium text-xs text-gray-900 group-hover:text-gray-700 mb-1">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</h4>
                                    <p class="text-xs text-gray-500 text-center leading-tight">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</p>
                                </div>
                            </div>
                        </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                
                <!-- Left Column: Settings -->
                <div class="lg:col-span-2 space-y-6">
                    
                    <!-- ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏µ Theme -->
                    <div id="theme-section" class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏µ Theme</h3>
                        </div>
                        <div class="px-6 py-4 space-y-4">
                            <!-- ‡∏™‡∏µ Header/Navigation Bar -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏µ Header Bar</label>
                                <div class="flex items-center space-x-3">
                                    <input type="color" id="headerColor" value="#3f2f15" class="w-12 h-10 border border-gray-300 rounded cursor-pointer">
                                    <input type="text" id="headerColorText" value="#3f2f15" class="border border-gray-300 rounded px-3 py-2 text-sm font-mono w-24">
                                    <button id="resetHeaderColor" class="text-xs text-gray-500 hover:text-gray-700">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</p>
                            </div>

                            <!-- ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏•‡∏±‡∏Å -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏´‡∏•‡∏±‡∏Å</label>
                                <div class="flex items-center space-x-3">
                                    <input type="color" id="backgroundColor" value="#929079" class="w-12 h-10 border border-gray-300 rounded cursor-pointer">
                                    <input type="text" id="backgroundColorText" value="#929079" class="border border-gray-300 rounded px-3 py-2 text-sm font-mono w-24">
                                    <button id="resetBackgroundColor" class="text-xs text-gray-500 hover:text-gray-700">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á slideshow</p>
                            </div>

                            <!-- ‡∏™‡∏µ Weather Section -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏µ Weather Section</label>
                                <div class="flex items-center space-x-3">
                                    <input type="color" id="weatherColor" value="#87ceeb" class="w-12 h-10 border border-gray-300 rounded cursor-pointer">
                                    <input type="text" id="weatherColorText" value="#87ceeb" class="border border-gray-300 rounded px-3 py-2 text-sm font-mono w-24">
                                    <button id="resetWeatherColor" class="text-xs text-gray-500 hover:text-gray-700">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</p>
                            </div>
                            
                            <!-- ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ -->
                            <div>
                                <h4 class="text-md font-medium text-gray-900 mb-3">‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</h4>
                                
                                <!-- ‡πÇ‡∏•‡πÇ‡∏Å‡πâ -->
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">‡πÇ‡∏•‡πÇ‡∏Å‡πâ (Canvas 39)</label>
                                    <div class="flex items-center space-x-4">
                                        <div class="flex-shrink-0">
                                            <img id="logoPreview" src="img/CANVAS 39 LOGO BOLD.png" alt="Canvas 39 Logo" class="h-12 w-auto object-contain bg-gray-100 rounded p-2">
                                        </div>
                                        <div class="flex-1">
                                            <input type="file" id="logoUpload" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                                            <p class="text-xs text-gray-500 mt-1">PNG, JPG, GIF ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 2MB</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- ‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£ (‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á)</label>
                                    <div class="flex items-center space-x-4">
                                        <div class="flex-shrink-0">
                                            <img id="buildingPreview" src="img/FRONT FULL.jpg" alt="Building Image" class="h-20 w-32 object-cover rounded border">
                                        </div>
                                        <div class="flex-1">
                                            <input type="file" id="buildingUpload" accept="image/*" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100">
                                            <p class="text-xs text-gray-500 mt-1">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ 1920x1080px, JPG ‡∏´‡∏£‡∏∑‡∏≠ PNG</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                    <!-- ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Font -->
                    <div id="font-section" class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Font</h3>
                        </div>
                        <div class="px-6 py-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Font</label>
                            <select id="fontSelect" class="w-full border border-gray-300 rounded-md px-3 py-2">
                                <option value="default">Default (System Font)</option>
                                <option value="roman">Roman (Local Font)</option>
                                <option value="kanit">Kanit (Google Fonts)</option>
                                <option value="sarabun">Sarabun (Google Fonts)</option>
                                <option value="inter">Inter (Google Fonts)</option>
                            </select>
                            <p class="text-xs text-gray-500 mt-1">Font ‡∏à‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠</p>
                        </div>
                    </div>

                    <!-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ -->
                    <div id="text-section" class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£</h3>
                            <p class="text-sm text-gray-600 mt-1">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÉ‡∏ô Tablet</p>
                        </div>
                        <div class="px-6 py-4 space-y-6">
                            
                            <!-- ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center gap-2">
                                    <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å
                                </h4>
                                
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "TODAY"</label>
                                        <input type="text" id="todayText" value="TODAY" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <p class="text-xs text-gray-500 mt-1">‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "OUTLOOK"</label>
                                        <input type="text" id="outlookText" value="OUTLOOK" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <p class="text-xs text-gray-500 mt-1">‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</p>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "AIR QUALITY"</label>
                                        <input type="text" id="airQualityText" value="AIR QUALITY" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <p class="text-xs text-gray-500 mt-1">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</p>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "POOL WATER"</label>
                                        <input type="text" id="poolWaterText" value="POOL WATER" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <p class="text-xs text-gray-500 mt-1">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥</p>
                                    </div>
                                </div>
                            </div>

                            <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏¢‡πà‡∏≠‡∏¢ -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center gap-2">
                                    <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 004 0V8a2 2 0 10-4 0v2zm8-2a2 2 0 10-4 0v2a2 2 0 004 0V8z"/>
                                    </svg>
                                    ‡∏™‡πà‡∏ß‡∏ô‡∏¢‡πà‡∏≠‡∏¢
                                </h4>
                                
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "INDOOR"</label>
                                        <input type="text" id="indoorText" value="INDOOR" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <p class="text-xs text-gray-500 mt-1">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏¢‡πÉ‡∏ô</p>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "OUTDOOR"</label>
                                        <input type="text" id="outdoorText" value="OUTDOOR" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        <p class="text-xs text-gray-500 mt-1">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å</p>
                                    </div>
                                </div>
                            </div>

                            <!-- ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå -->
                            <div class="bg-blue-50 rounded-lg p-4">
                                <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center gap-2">
                                    <svg class="w-5 h-5 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                                    </svg>
                                    ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Tablet
                                </h4>
                                
                                <div class="grid md:grid-cols-3 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÉ‡∏´‡∏ç‡πà (‡πÄ‡∏ß‡∏•‡∏≤/AQI)</label>
                                        <select id="titleFontSize" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="text-3xl">3XL (‡∏õ‡∏Å‡∏ï‡∏¥)</option>
                                            <option value="text-4xl" selected>4XL (‡πÉ‡∏´‡∏ç‡πà)</option>
                                            <option value="text-5xl">5XL (‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å)</option>
                                            <option value="text-6xl">6XL (‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)</option>
                                        </select>
                                        <p class="text-xs text-gray-500 mt-1">‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç AQI</p>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏•‡∏≤‡∏á</label>
                                        <select id="subtitleFontSize" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="text-lg">LG (‡πÄ‡∏•‡πá‡∏Å)</option>
                                            <option value="text-xl" selected>XL (‡∏õ‡∏Å‡∏ï‡∏¥)</option>
                                            <option value="text-2xl">2XL (‡πÉ‡∏´‡∏ç‡πà)</option>
                                            <option value="text-3xl">3XL (‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å)</option>
                                        </select>
                                        <p class="text-xs text-gray-500 mt-1">‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö TODAY, OUTLOOK</p>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤</label>
                                        <select id="bodyFontSize" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            <option value="text-sm">SM (‡πÄ‡∏•‡πá‡∏Å)</option>
                                            <option value="text-base">Base (‡∏õ‡∏Å‡∏ï‡∏¥)</option>
                                            <option value="text-lg" selected>LG (‡πÉ‡∏´‡∏ç‡πà)</option>
                                            <option value="text-xl">XL (‡πÉ‡∏´‡∏ç‡πà‡∏°‡∏≤‡∏Å)</option>
                                        </select>
                                        <p class="text-xs text-gray-500 mt-1">‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</p>
                                    </div>
                                </div>
                                
                                <div class="mt-4 p-3 bg-white rounded-lg border border-blue-200">
                                    <p class="text-sm text-blue-800 font-medium mb-2">üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Tablet:</p>
                                    <ul class="text-xs text-blue-700 space-y-1">
                                        <li>‚Ä¢ ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô = ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡πÑ‡∏Å‡∏•</li>
                                        <li>‚Ä¢ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÉ‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°</li>
                                        <li>‚Ä¢ ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ 4XL-6XL</li>
                                    </ul>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Quality Data Settings -->
                    <div id="quality-section" class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞ API</h3>
                            <p class="text-sm text-gray-600 mt-1">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Weather API ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®</p>
                        </div>
                        <div class="px-6 py-4 space-y-6">
                            <!-- Weather API Settings -->
                            <div>
                                <h4 class="text-md font-medium text-gray-900 mb-3">üå§Ô∏è Weather API</h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Weather API Provider</label>
                                        <select id="weatherApiSelect" class="w-full border border-gray-300 rounded-md px-3 py-2">
                                            <option value="openmeteo">OpenMeteo (‡∏ü‡∏£‡∏µ, ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</option>
                                            <option value="wttr">wttr.in (‡∏ü‡∏£‡∏µ, ‡∏™‡∏≥‡∏£‡∏≠‡∏á)</option>
                                            <option value="openweather">OpenWeatherMap</option>
                                        </select>
                                    </div>
                                    
                                    <!-- OpenWeatherMap API Key -->
                                    <div id="openweatherKeyDiv" class="hidden">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">OpenWeatherMap API Key</label>
                                        <input type="text" id="openweatherKey" value="db61b712294c46506059042663feeac6" class="w-full border border-gray-300 rounded-md px-3 py-2 font-mono text-sm">
                                        <p class="text-xs text-gray-500 mt-1">‡πÉ‡∏™‡πà API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö OpenWeatherMap</p>
                                    </div>
                                    
                                    <!-- Update Interval -->
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (‡∏ô‡∏≤‡∏ó‡∏µ)</label>
                                        <select id="updateInterval" class="w-full border border-gray-300 rounded-md px-3 py-2">
                                            <option value="5">‡∏ó‡∏∏‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                            <option value="10" selected>‡∏ó‡∏∏‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                            <option value="15">‡∏ó‡∏∏‡∏Å 15 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                            <option value="30">‡∏ó‡∏∏‡∏Å 30 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- AQI Settings -->
                            <div>
                                <h4 class="text-md font-medium text-gray-900 mb-3">üå¨Ô∏è Air Quality Index (AQI)</h4>
                                <div class="space-y-3">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ß‡∏±‡∏î Indoor AQI</label>
                                        <input type="text" id="indoorAqiStation" value="Canvas 39" class="w-full border border-gray-300 rounded-md px-3 py-2">
                                        <p class="text-xs text-gray-500 mt-1">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ß‡∏±‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏ß‡∏±‡∏î Outdoor AQI</label>
                                        <input type="text" id="outdoorAqiLocation" value="Bangkok" class="w-full border border-gray-300 rounded-md px-3 py-2">
                                        <p class="text-xs text-gray-500 mt-1">‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Theme Presets -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Theme Presets</label>
                                <div class="grid grid-cols-3 gap-2">
                                    <button id="themeDefault" class="bg-amber-100 hover:bg-amber-200 text-amber-800 px-3 py-2 rounded text-xs font-medium border border-amber-300">
                                        Default
                                    </button>
                                    <button id="themeBlue" class="bg-blue-100 hover:bg-blue-200 text-blue-800 px-3 py-2 rounded text-xs font-medium border border-blue-300">
                                        Blue
                                    </button>
                                    <button id="themeGreen" class="bg-green-100 hover:bg-green-200 text-green-800 px-3 py-2 rounded text-xs font-medium border border-green-300">
                                        Green
                                    </button>
                                    <button id="themeDark" class="bg-gray-800 hover:bg-gray-700 text-white px-3 py-2 rounded text-xs font-medium border border-gray-600">
                                        Dark
                                    </button>
                                    <button id="themeModern" class="bg-purple-100 hover:bg-purple-200 text-purple-800 px-3 py-2 rounded text-xs font-medium border border-purple-300">
                                        Modern
                                    </button>
                                    <button id="themeWarm" class="bg-orange-100 hover:bg-orange-200 text-orange-800 px-3 py-2 rounded text-xs font-medium border border-orange-300">
                                        Warm
                                    </button>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡∏™‡∏µ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏£‡∏π‡∏õ</p>
                            </div>
                        </div>
                    </div>


                    <!-- ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® -->
                    <div id="notification-section" class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h3>
                            <p class="text-sm text-gray-600 mt-1">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏° ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏à‡∏≤‡∏Å‡∏ù‡πà‡∏≤‡∏¢‡∏ô‡∏¥‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠</p>
                        </div>
                        <div class="px-6 py-4 space-y-6">
                            
                            <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• -->
                            <div class="bg-orange-50 rounded-lg p-4">
                                <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center gap-2">
                                    <svg class="w-5 h-5 text-orange-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"/>
                                    </svg>
                                    ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£
                                </h4>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</label>
                                            <p class="text-xs text-gray-500">‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏´‡∏•‡∏±‡∏Å</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" id="notificationEnabled" class="sr-only peer" checked>
                                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"></div>
                                        </label>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô</label>
                                        <select id="notificationSpeed" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500">
                                            <option value="slow">‡∏ä‡πâ‡∏≤ (8 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</option>
                                            <option value="normal" selected>‡∏õ‡∏Å‡∏ï‡∏¥ (5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</option>
                                            <option value="fast">‡πÄ‡∏£‡πá‡∏ß (3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</option>
                                        </select>
                                        <p class="text-xs text-gray-500 mt-1">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</p>
                                    </div>
                                </div>
                            </div>


                            <!-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® -->
                            <div class="bg-green-50 rounded-lg p-4">
                                <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center gap-2">
                                    <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"/>
                                    </svg>
                                    ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®
                                </h4>
                                
                                <div class="space-y-4">
                                    <div class="bg-white rounded-lg p-3 border border-green-200">
                                        <div class="text-sm text-green-800 mb-2">
                                            <strong>‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:</strong>
                                        </div>
                                        <ol class="text-xs text-green-700 space-y-1">
                                            <li>1. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏û‡∏¥‡πà‡∏°" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏´‡∏°‡πà</li>
                                            <li>2. ‡πÉ‡∏™‡πà‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</li>
                                            <li>3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</li>
                                            <li>4. ‡∏Å‡∏î "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</li>
                                            <li>5. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤" ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠ sync ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠</li>
                                        </ol>
                                    </div>
                                    
                                    <div>
                                        <div class="flex justify-between items-center mb-3">
                                            <label class="block text-sm font-medium text-gray-700">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</label>
                                            <button id="addNoticeBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center shadow-md hover:shadow-lg transition-all">
                                                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"/>
                                                </svg>
                                                ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏´‡∏°‡πà
                                            </button>
                                        </div>
                                        
                                        <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® -->
                                        <div id="noticesList" class="space-y-2 max-h-40 overflow-y-auto">
                                            <div class="bg-white border border-gray-200 rounded-lg p-3 text-sm">
                                                <div class="flex justify-between items-start">
                                                    <div class="flex-1">
                                                        <div class="font-medium text-gray-900 mb-1">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°</div>
                                                        <div class="text-gray-600 text-xs">‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏à‡∏∞‡∏õ‡∏¥‡∏î‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß...</div>
                                                    </div>
                                                    <div class="flex items-center space-x-1 ml-2">
                                                        <button class="text-blue-600 hover:text-blue-800 text-xs">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                                                        <button class="text-red-600 hover:text-red-800 text-xs">‡∏•‡∏ö</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Empty State -->
                                        <div id="emptyNotices" class="hidden text-center py-6 text-gray-400">
                                            <svg class="w-8 h-8 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M8 12h4l-2 5-2-5zM18 7H2C1.4 7 1 6.6 1 6s.4-1 1-1h16c.6 0 1 .4 1 1s-.4 1-1 1z"/>
                                            </svg>
                                            <p class="text-xs">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Slideshow -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Slideshow</h3>
                        </div>
                        <div class="px-6 py-4 space-y-4">
                            <!-- ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î Slideshow -->
                            <div>
                                <label class="flex items-center">
                                    <input type="checkbox" id="slideshowEnabled" checked class="rounded border-gray-300 text-blue-600">
                                    <span class="ml-2 text-sm font-medium text-gray-700">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Auto Slideshow</span>
                                </label>
                                <p class="text-xs text-gray-500 mt-1">‡∏™‡∏•‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≥‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
                            </div>
                            
                            <!-- ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö</label>
                                <select id="slideshowInterval" class="w-full border border-gray-300 rounded-md px-3 py-2">
                                    <option value="5">‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                    <option value="10" selected>‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                    <option value="15">‡∏ó‡∏∏‡∏Å 15 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                    <option value="20">‡∏ó‡∏∏‡∏Å 20 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                    <option value="30">‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
                                </select>
                            </div>
                            
                            <!-- ‡πÅ‡∏™‡∏î‡∏á Slides ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Slides ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="showAirQuality" checked class="rounded border-gray-300 text-blue-600">
                                        <span class="ml-2 text-sm text-gray-700">üå¨Ô∏è ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (Indoor/Outdoor AQI)</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="showPoolWater" checked class="rounded border-gray-300 text-blue-600">
                                        <span class="ml-2 text-sm text-gray-700">üèä‚Äç‚ôÇÔ∏è ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏ô‡πâ‡∏≥‡∏™‡∏£‡∏∞ (pH, ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡∏ô, ORP, ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥)</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Right Column: Preview & Status -->
                <div class="space-y-6">
                    
                    <!-- ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
                        </div>
                        <div class="px-6 py-4 space-y-3">
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center">
                                    <span class="text-blue-600 text-xs font-medium">1</span>
                                </div>
                                <p class="text-sm text-gray-600">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</p>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center">
                                    <span class="text-blue-600 text-xs font-medium">2</span>
                                </div>
                                <p class="text-sm text-gray-600">‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤"</p>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center">
                                    <span class="text-blue-600 text-xs font-medium">3</span>
                                </div>
                                <p class="text-sm text-gray-600">‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå <code class="bg-gray-100 px-1 rounded text-xs">index.html</code> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</p>
                            </div>
                        </div>
                    </div>

                    <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</h3>
                        </div>
                        <div class="px-6 py-4 space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Weather API</span>
                                <span id="weatherStatus" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    <div class="w-1.5 h-1.5 bg-green-400 rounded-full mr-1"></div>
                                    ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
                                </span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">AQI Data</span>
                                <span id="aqiStatus" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    <div class="w-1.5 h-1.5 bg-yellow-400 rounded-full mr-1"></div>
                                    Mock Data
                                </span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span>
                                <span id="lastUpdate" class="text-sm text-gray-900">--:--:--</span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Display Status</span>
                                <span id="displayStatus" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                    <div class="w-1.5 h-1.5 bg-blue-400 rounded-full mr-1"></div>
                                    ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô -->
                    <div class="bg-white overflow-hidden shadow rounded-lg">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
                        </div>
                        <div class="px-6 py-4 space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥</span>
                                <span id="currentTemp" class="text-sm font-medium text-gray-900">--¬∞C</span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">AQI ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô</span>
                                <span id="currentIndoorAQI" class="text-sm font-medium text-gray-900">--</span>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">AQI ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å</span>
                                <span id="currentOutdoorAQI" class="text-sm font-medium text-gray-900">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Management Modal -->
    <div id="userManagementModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <!-- Modal Header -->
                <div class="flex items-center justify-between pb-4 border-b">
                    <h3 class="text-lg font-semibold text-gray-900 flex items-center">
                        <i data-lucide="users" class="w-5 h-5 mr-2"></i>
                        ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                    </h3>
                    <button id="closeUserModal" class="text-gray-400 hover:text-gray-600">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <!-- Modal Content -->
                <div class="py-4">
                    <!-- Add User Button -->
                    <div class="mb-4 flex justify-between items-center">
                        <h4 class="text-md font-medium text-gray-700">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h4>
                        <button id="addUserBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center">
                            <i data-lucide="user-plus" class="w-4 h-4 mr-2"></i>
                            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                        </button>
                    </div>

                    <!-- Users Table -->
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left text-gray-500">
                            <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</th>
                                    <th scope="col" class="px-6 py-3">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                    <th scope="col" class="px-6 py-3">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</th>
                                    <th scope="col" class="px-6 py-3">‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</th>
                                    <th scope="col" class="px-6 py-3">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á</th>
                                    <th scope="col" class="px-6 py-3">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Users will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add/Edit User Modal -->
    <div id="userFormModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-11/12 max-w-md shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <!-- Modal Header -->
                <div class="flex items-center justify-between pb-4 border-b">
                    <h3 id="userFormTitle" class="text-lg font-semibold text-gray-900">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h3>
                    <button id="closeUserFormModal" class="text-gray-400 hover:text-gray-600">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <!-- User Form -->
                <form id="userForm" class="py-4 space-y-4">
                    <input type="hidden" id="userId" name="userId">
                    
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                        <input type="text" id="userFormUsername" name="username" required
                            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                    </div>

                    <div>
                        <label for="name" class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                        <input type="text" id="userFormName" name="name" required
                            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                    </div>

                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-2">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                        <input type="email" id="userFormEmail" name="email" required
                            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                    </div>

                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                        <input type="password" id="userFormPassword" name="password"
                            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <p class="text-xs text-gray-500 mt-1">‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</p>
                    </div>

                    <div>
                        <label for="role" class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</label>
                        <select id="userFormRole" name="role" required
                            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <option value="admin">‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</option>
                            <option value="user">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
                        </select>
                    </div>

                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" id="cancelUserForm" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md">
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notice Form Modal -->
    <div id="noticeFormModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-10 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <!-- Modal Header -->
                <div class="flex items-center justify-between pb-4 border-b">
                    <h3 id="noticeFormTitle" class="text-lg font-semibold text-gray-900">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏´‡∏°‡πà</h3>
                    <button id="closeNoticeFormModal" class="text-gray-400 hover:text-gray-600">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>

                <!-- Notice Form -->
                <form id="noticeForm" class="py-4 space-y-4">
                    <input type="hidden" id="noticeId" name="noticeId">
                    
                    <div>
                        <label for="noticeTitle" class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</label>
                        <input type="text" id="noticeTitle" name="title" required
                            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                            placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</label>
                        <div class="bg-white rounded-md">
                            <div id="noticeToolbar" class="border border-gray-300 rounded-t-md">
                                <span class="ql-formats">
                                    <select class="ql-font"></select>
                                    <select class="ql-size"></select>
                                </span>
                                <span class="ql-formats">
                                    <button class="ql-bold"></button>
                                    <button class="ql-italic"></button>
                                    <button class="ql-underline"></button>
                                    <button class="ql-strike"></button>
                                </span>
                                <span class="ql-formats">
                                    <select class="ql-color"></select>
                                    <select class="ql-background"></select>
                                </span>
                                <span class="ql-formats">
                                    <button class="ql-list" value="ordered"></button>
                                    <button class="ql-list" value="bullet"></button>
                                    <button class="ql-indent" value="-1"></button>
                                    <button class="ql-indent" value="+1"></button>
                                </span>
                                <span class="ql-formats">
                                    <button class="ql-align" value=""></button>
                                    <button class="ql-align" value="center"></button>
                                    <button class="ql-align" value="right"></button>
                                    <button class="ql-align" value="justify"></button>
                                </span>
                                <span class="ql-formats">
                                    <button class="ql-link"></button>
                                    <button class="ql-clean"></button>
                                </span>
                            </div>
                            <div id="noticeContent" class="border-l border-r border-b border-gray-300 rounded-b-md" style="height: 200px;"></div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Rich Text formatting ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</p>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="noticePosition" class="block text-sm font-medium text-gray-700 mb-2">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</label>
                            <select id="noticePosition" name="position" 
                                class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <option value="bottom" selected>‡πÅ‡∏ñ‡∏ö‡∏ß‡∏¥‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (Footer)</option>
                                <option value="overlay">‡∏õ‡πá‡∏≠‡∏ö‡∏≠‡∏±‡∏û‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ (Overlay)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label for="noticeType" class="block text-sm font-medium text-gray-700 mb-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</label>
                            <select id="noticeType" name="type" 
                                class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                <option value="info">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)</option>
                                <option value="warning" selected>‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á)</option>
                                <option value="success">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)</option>
                                <option value="error">‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (‡πÅ‡∏î‡∏á)</option>
                            </select>
                        </div>
                    </div>

                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" id="cancelNoticeForm" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md">
                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Global variables
        let quillEditor = null;
        
        // Configuration object to store all settings
        const config = {
            font: 'default',
            weatherApi: 'openmeteo',
            openweatherKey: 'db61b712294c46506059042663feeac6',
            aqiSource: 'mock',
            updateInterval: 10,
            notices: [],
            images: {
                logo: 'img/logo.png',
                building: 'img/FRONT FULL.jpg'
            },
            slideshow: {
                enabled: true,
                interval: 10, // seconds
                showAirQuality: true,
                showPoolWater: true
            }
        };

        // Initialize Color Theme Controls (‡πÄ‡∏ö‡∏≤‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà)
        function initializeColorTheme() {
            // Initialize default theme colors from config
            if (!config.theme) {
                config.theme = {
                    headerColor: '#3f2f15',
                    backgroundColor: '#929079',
                    weatherTodayColor: '#f3efe6',
                    weatherOutlookColor: '#ddd6cc'
                };
            }

            // Sync color inputs with text inputs (‡πÄ‡∏ö‡∏≤)
            const colorSync = [
                ['headerColor', 'headerColorText'],
                ['backgroundColor', 'backgroundColorText'],
                ['weatherTodayColor', 'weatherTodayColorText'],
                ['weatherOutlookColor', 'weatherOutlookColorText']
            ];

            colorSync.forEach(([colorId, textId]) => {
                const colorInput = document.getElementById(colorId);
                const textInput = document.getElementById(textId);
                
                if (colorInput && textInput) {
                    // Load saved values
                    const savedColor = config.theme[colorId] || colorInput.value;
                    colorInput.value = savedColor;
                    textInput.value = savedColor;
                    
                    // Sync color picker to text input
                    colorInput.addEventListener('input', function() {
                        textInput.value = this.value;
                        config.theme[colorId] = this.value;
                    });
                    
                    // Sync text input to color picker
                    textInput.addEventListener('input', function() {
                        if (/^#[0-9A-F]{6}$/i.test(this.value)) {
                            colorInput.value = this.value;
                            config.theme[colorId] = this.value;
                        }
                    });
                }
            });

            // Theme preset buttons (‡πÄ‡∏ö‡∏≤‡πÜ)
            const themes = {
                'themeDefault': { 
                    headerColor: '#3f2f15', backgroundColor: '#929079',
                    weatherTodayColor: '#f3efe6', weatherOutlookColor: '#ddd6cc'
                },
                'themeBlue': { 
                    headerColor: '#1e3a8a', backgroundColor: '#60a5fa',
                    weatherTodayColor: '#dbeafe', weatherOutlookColor: '#bfdbfe'
                },
                'themeGreen': { 
                    headerColor: '#166534', backgroundColor: '#4ade80',
                    weatherTodayColor: '#dcfce7', weatherOutlookColor: '#bbf7d0'
                },
                'themeDark': { 
                    headerColor: '#111827', backgroundColor: '#374151',
                    weatherTodayColor: '#4b5563', weatherOutlookColor: '#6b7280'
                },
                'themeModern': { 
                    headerColor: '#581c87', backgroundColor: '#a855f7',
                    weatherTodayColor: '#f3e8ff', weatherOutlookColor: '#e9d5ff'
                },
                'themeWarm': { 
                    headerColor: '#c2410c', backgroundColor: '#fb923c',
                    weatherTodayColor: '#fed7aa', weatherOutlookColor: '#fdba74'
                }
            };

            Object.keys(themes).forEach(themeId => {
                const button = document.getElementById(themeId);
                if (button) {
                    button.addEventListener('click', function() {
                        const theme = themes[themeId];
                        
                        // Apply theme to inputs
                        Object.keys(theme).forEach(key => {
                            const colorInput = document.getElementById(key);
                            const textInput = document.getElementById(key + 'Text');
                            
                            if (colorInput && textInput) {
                                colorInput.value = theme[key];
                                textInput.value = theme[key];
                                config.theme[key] = theme[key];
                            }
                        });
                        
                        console.log(`üé® Applied ${themeId} theme`);
                    });
                }
            });

            // Reset buttons
            ['resetHeaderColor', 'resetBackgroundColor'].forEach(resetId => {
                const button = document.getElementById(resetId);
                if (button) {
                    button.addEventListener('click', function() {
                        const defaultTheme = themes.themeDefault;
                        const key = resetId.replace('reset', '').charAt(0).toLowerCase() + resetId.replace('reset', '').slice(1);
                        
                        if (defaultTheme[key]) {
                            const colorInput = document.getElementById(key);
                            const textInput = document.getElementById(key + 'Text');
                            
                            if (colorInput && textInput) {
                                colorInput.value = defaultTheme[key];
                                textInput.value = defaultTheme[key];
                                config.theme[key] = defaultTheme[key];
                            }
                        }
                    });
                }
            });

            console.log('üé® Color theme controls initialized (lightweight)');
        }

        // Initialize Quill Editor
        function initQuillEditor() {
            if (typeof Quill !== 'undefined') {
                quillEditor = new Quill('#noticeContent', {
                    theme: 'snow',
                    modules: {
                        toolbar: '#noticeToolbar'
                    },
                    placeholder: '‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á...',
                    formats: ['font', 'size', 'bold', 'italic', 'underline', 'strike', 'color', 'background', 'list', 'indent', 'align', 'link']
                });
                console.log('‚úÖ Quill Editor initialized');
            } else {
                console.error('‚ùå Quill library not loaded');
            }
        }

        // Load saved configuration
        async function loadConfig() {
            // ‡∏•‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å JSONBin.io ‡∏Å‡πà‡∏≠‡∏ô (Primary)
            try {
                console.log('üì¶ Loading config from JSONBin.io (Primary)...');
                
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_CONFIG.binId}/latest`, {
                    method: 'GET',
                    headers: {
                        'X-Access-Key': JSONBIN_CONFIG.accessKey
                    }
                });
                
                if (response.ok) {
                    const result = await response.json();
                    const configData = result.record;
                    Object.assign(config, configData);
                    console.log('‚úÖ Configuration loaded from JSONBin.io:', config);
                    
                    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö cache
                    localStorage.setItem('canvas39_admin_config', JSON.stringify(config));
                    updateUI();
                    return;
                }
            } catch (error) {
                console.error('‚ùå Failed to load from JSONBin.io:', error);
            }
            
            // ‡∏•‡∏≠‡∏á Firebase backup
            if (window.firebaseDB && window.firebaseGet && window.firebaseRef) {
                try {
                    console.log('üî• Loading config from Firebase (Backup)...');
                    const snapshot = await window.firebaseGet(window.firebaseRef(window.firebaseDB, 'canvas39-config'));
                    
                    if (snapshot.exists()) {
                        const configData = snapshot.val();
                        Object.assign(config, configData);
                        console.log('‚úÖ Configuration loaded from Firebase backup:', config);
                        
                        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö cache
                        localStorage.setItem('canvas39_admin_config', JSON.stringify(config));
                        updateUI();
                        return;
                    }
                } catch (error) {
                    console.error('‚ùå Failed to load from Firebase backup:', error);
                }
            }
            
            // Fallback: ‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å localStorage
            const saved = localStorage.getItem('canvas39_admin_config');
            if (saved) {
                Object.assign(config, JSON.parse(saved));
                console.log('üìÑ Configuration loaded from localStorage (fallback)');
                updateUI();
            }
        }

        // Save configuration
        let isSaving = false; // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏ã‡πâ‡∏≥
        async function saveConfig() {
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏ã‡πâ‡∏≥
            if (isSaving) {
                console.log('‚ö†Ô∏è Save already in progress, ignoring...');
                return;
            }
            
            isSaving = true;
            const saveBtn = document.getElementById('saveBtn');
            const originalText = saveBtn.innerHTML;
            
            // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
            console.log('üìã Reading latest values from form...');
            const safeGetValue = (id, defaultValue = '') => {
                const element = document.getElementById(id);
                return element ? (element.type === 'checkbox' ? element.checked : element.value) : defaultValue;
            };

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô config object ‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°
            config.font = safeGetValue('fontSelect', config.font);
            config.weatherApi = safeGetValue('weatherApiSelect', config.weatherApi);
            config.openweatherKey = safeGetValue('openweatherKey', config.openweatherKey);
            config.updateInterval = parseInt(safeGetValue('updateInterval', config.updateInterval));
            config.aqiSource = safeGetValue('aqiSourceSelect', config.aqiSource);
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï slideshow settings
            if (!config.slideshow) config.slideshow = {};
            config.slideshow.enabled = safeGetValue('slideshowEnabled', config.slideshow.enabled);
            config.slideshow.interval = parseInt(safeGetValue('slideshowInterval', config.slideshow.interval));
            config.slideshow.showAirQuality = safeGetValue('showAirQuality', config.slideshow.showAirQuality);
            config.slideshow.showPoolWater = safeGetValue('showPoolWater', config.slideshow.showPoolWater);
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï AQI settings
            config.indoorAqiStation = safeGetValue('indoorAqiStation', config.indoorAqiStation);
            config.outdoorAqiLocation = safeGetValue('outdoorAqiLocation', config.outdoorAqiLocation);
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï section titles
            if (!config.sectionTitles) config.sectionTitles = {};
            config.sectionTitles.todayText = safeGetValue('todayText', config.sectionTitles.todayText || 'TODAY');
            config.sectionTitles.outlookText = safeGetValue('outlookText', config.sectionTitles.outlookText || 'OUTLOOK');
            config.sectionTitles.airQualityText = safeGetValue('airQualityText', config.sectionTitles.airQualityText || 'AIR QUALITY');
            config.sectionTitles.poolWaterText = safeGetValue('poolWaterText', config.sectionTitles.poolWaterText || 'POOL WATER');
            config.sectionTitles.indoorText = safeGetValue('indoorText', config.sectionTitles.indoorText || 'INDOOR');
            config.sectionTitles.outdoorText = safeGetValue('outdoorText', config.sectionTitles.outdoorText || 'OUTDOOR');
            
            console.log('‚úÖ Config values updated from form:', config);

            // ‡πÅ‡∏™‡∏î‡∏á loading state
            saveBtn.disabled = true;
            saveBtn.innerHTML = '<i data-lucide="loader-2" class="w-4 h-4 mr-2 animate-spin"></i>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...';
            saveBtn.className = saveBtn.className.replace('bg-green-600 hover:bg-green-700', 'bg-blue-600');
            lucide.createIcons();
            
            let jsonbinSuccess = false;
            let firebaseSuccess = false;
            
            // ‡∏•‡∏≠‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ JSONBin.io ‡∏Å‡πà‡∏≠‡∏ô (Primary)
            try {
                console.log('üì¶ Saving config to JSONBin.io (Primary)...');
                
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_CONFIG.binId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': JSONBIN_CONFIG.masterKey,
                        'X-Bin-Versioning': 'false'
                    },
                    body: JSON.stringify(config)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    console.log('‚úÖ Config saved to JSONBin.io successfully:', result);
                    jsonbinSuccess = true;
                } else {
                    throw new Error(`JSONBin error: ${response.status}`);
                }
            } catch (error) {
                console.error('‚ùå JSONBin.io failed:', error);
            }
            
            // ‡∏•‡∏≠‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ Firebase ‡πÄ‡∏õ‡πá‡∏ô backup (with timeout)
            if (window.firebaseDB && window.firebaseSet && window.firebaseRef) {
                try {
                    console.log('üî• Saving config to Firebase (Backup)...');
                    
                    // ‡πÄ‡∏û‡∏¥‡πà‡∏° timeout ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Firebase (3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ - ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô)
                    const firebasePromise = window.firebaseSet(window.firebaseRef(window.firebaseDB, 'canvas39-config'), config);
                    const timeoutPromise = new Promise((_, reject) => 
                        setTimeout(() => reject(new Error('Firebase timeout')), 3000)
                    );
                    
                    await Promise.race([firebasePromise, timeoutPromise]);
                    console.log('‚úÖ Config saved to Firebase backup successfully');
                    firebaseSuccess = true;
                } catch (error) {
                    console.error('‚ùå Firebase backup failed:', error.message);
                    // ‡πÑ‡∏°‡πà block ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡∏ñ‡πâ‡∏≤ Firebase ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
                }
            } else {
                console.log('‚ö†Ô∏è Firebase not available - skipping backup');
            }
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö cache
            localStorage.setItem('canvas39_admin_config', JSON.stringify(config));
            
            // ‡∏™‡πà‡∏á broadcast ‡πÑ‡∏õ‡∏¢‡∏±‡∏á display tabs (same origin)
            broadcastConfigUpdate(config);
            
            // ‡∏£‡∏≠‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ reset ‡∏õ‡∏∏‡πà‡∏° (‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠)
            setTimeout(() => {
                saveBtn.disabled = false;
                
                if (jsonbinSuccess && firebaseSuccess) {
                    saveBtn.innerHTML = '<i data-lucide="check" class="w-4 h-4 mr-2"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
                    saveBtn.className = saveBtn.className.replace('bg-blue-600', 'bg-green-600 hover:bg-green-700');
                    showNotification('üéâ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ó‡∏±‡πâ‡∏á JSONBin.io ‡πÅ‡∏•‡∏∞ Firebase backup!', 'success');
                } else if (jsonbinSuccess) {
                    saveBtn.innerHTML = '<i data-lucide="check" class="w-4 h-4 mr-2"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
                    saveBtn.className = saveBtn.className.replace('bg-blue-600', 'bg-green-600 hover:bg-green-700');
                    showNotification('üì¶ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ JSONBin.io ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (Firebase backup ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°)', 'success');
                } else if (firebaseSuccess) {
                    saveBtn.innerHTML = '<i data-lucide="check" class="w-4 h-4 mr-2"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß';
                    saveBtn.className = saveBtn.className.replace('bg-blue-600', 'bg-yellow-600 hover:bg-yellow-700');
                    showNotification('üî• ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ Firebase ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (JSONBin.io ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°)', 'warning');
                } else {
                    saveBtn.innerHTML = '<i data-lucide="x-circle" class="w-4 h-4 mr-2"></i>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß';
                    saveBtn.className = saveBtn.className.replace('bg-blue-600', 'bg-red-600 hover:bg-red-700');
                    showNotification('‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ cloud ‡πÑ‡∏î‡πâ - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞ localStorage', 'error');
                }
                
                lucide.createIcons();
                
                // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏Å‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                setTimeout(() => {
                    saveBtn.innerHTML = originalText;
                    saveBtn.className = saveBtn.className.replace(/bg-(green|yellow|red)-600 hover:bg-(green|yellow|red)-700/, 'bg-green-600 hover:bg-green-700');
                    lucide.createIcons();
                    isSaving = false; // ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                }, 3000);
            }, 500);
        }

        // Broadcast config updates using BroadcastChannel
        function broadcastConfigUpdate(configData) {
            try {
                // Create broadcast channel for same-origin communication
                const channel = new BroadcastChannel('canvas39-config');
                channel.postMessage({
                    type: 'config-update',
                    config: configData,
                    timestamp: Date.now()
                });
                console.log('üì° Config broadcast to other windows');
            } catch (error) {
                console.warn('BroadcastChannel not supported:', error);
            }
        }

        // Update UI with current config
        function updateUI() {
            // Safely update elements only if they exist
            const safeUpdate = (id, value, property = 'value') => {
                const element = document.getElementById(id);
                if (element) {
                    if (property === 'checked') {
                        element.checked = value;
                    } else if (property === 'src') {
                        element.src = value;
                    } else {
                        element.value = value;
                    }
                }
            };

            safeUpdate('fontSelect', config.font);
            safeUpdate('weatherApiSelect', config.weatherApi);
            safeUpdate('openweatherKey', config.openweatherKey);
            safeUpdate('aqiSourceSelect', config.aqiSource);
            safeUpdate('updateInterval', config.updateInterval);
            
            // Update section titles
            if (config.sectionTitles) {
                safeUpdate('todayText', config.sectionTitles.todayText || 'TODAY');
                safeUpdate('outlookText', config.sectionTitles.outlookText || 'OUTLOOK');
                safeUpdate('airQualityText', config.sectionTitles.airQualityText || 'AIR QUALITY');
                safeUpdate('poolWaterText', config.sectionTitles.poolWaterText || 'POOL WATER');
                safeUpdate('indoorText', config.sectionTitles.indoorText || 'INDOOR');
                safeUpdate('outdoorText', config.sectionTitles.outdoorText || 'OUTDOOR');
            }
            
            // Update slideshow settings
            if (config.slideshow) {
                safeUpdate('slideshowEnabled', config.slideshow.enabled, 'checked');
                safeUpdate('slideshowInterval', config.slideshow.interval);
                safeUpdate('showAirQuality', config.slideshow.showAirQuality, 'checked');
                safeUpdate('showPoolWater', config.slideshow.showPoolWater, 'checked');
            }
            
            // Update image previews
            if (config.images) {
                if (config.images.logo) {
                    safeUpdate('logoPreview', config.images.logo, 'src');
                    console.log('üñºÔ∏è Logo preview updated from config');
                }
                if (config.images.building) {
                    safeUpdate('buildingPreview', config.images.building, 'src');
                    console.log('üè¢ Building preview updated from config');
                }
            }
            
            // Load notices
            loadNoticesList();
            
            // Show/hide OpenWeather API key field
            toggleOpenWeatherKey();
        }

        // Toggle OpenWeather API key field
        function toggleOpenWeatherKey() {
            const weatherApiElement = document.getElementById('weatherApiSelect');
            const keyDiv = document.getElementById('openweatherKeyDiv');
            if (weatherApiElement && keyDiv) {
                const weatherApi = weatherApiElement.value;
                keyDiv.classList.toggle('hidden', weatherApi !== 'openweather');
            }
        }

        // Show notification
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-md shadow-lg ${
                type === 'success' ? 'bg-green-500 text-white' : 
                type === 'error' ? 'bg-red-500 text-white' : 
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize Quill Rich Text Editor
        function initQuillEditor() {
            quillEditor = new Quill('#noticeContent', {
                theme: 'snow',
                modules: {
                    toolbar: '#noticeToolbar'
                },
                placeholder: '‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á...',
                formats: ['font', 'size', 'bold', 'italic', 'underline', 'strike', 'color', 'background', 'list', 'indent', 'align', 'link']
            });
        }

        // Notice Management Functions
        function generateNoticeId() {
            return Date.now().toString();
        }

        function loadNoticesList() {
            const noticesList = document.getElementById('noticesList');
            const emptyNotices = document.getElementById('emptyNotices');
            
            if (config.notices.length === 0) {
                noticesList.innerHTML = '';
                emptyNotices.classList.remove('hidden');
            } else {
                emptyNotices.classList.add('hidden');
                noticesList.innerHTML = config.notices.map(notice => {
                    const positionText = {
                        'top': 'Header',
                        'bottom': 'Footer', 
                        'overlay': 'Overlay'
                    }[notice.position || 'bottom'];
                    
                    const typeColors = {
                        'info': 'bg-blue-100 text-blue-800',
                        'warning': 'bg-yellow-100 text-yellow-800',
                        'success': 'bg-green-100 text-green-800',
                        'error': 'bg-red-100 text-red-800'
                    };
                    
                    const typeText = {
                        'info': '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                        'warning': '‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô',
                        'success': '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
                        'error': '‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç'
                    };
                    
                    return `
                    <div class="border border-gray-200 rounded-lg p-4">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-3">
                                <h4 class="text-md font-medium text-gray-900">${notice.title}</h4>
                                <span class="px-2 py-1 text-xs rounded-full ${typeColors[notice.type || 'warning']}">${typeText[notice.type || 'warning']}</span>
                                <span class="px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full">${positionText}</span>
                                <label class="inline-flex items-center">
                                    <input type="checkbox" ${notice.active ? 'checked' : ''} 
                                           onchange="toggleNotice('${notice.id}')"
                                           class="rounded border-gray-300 text-blue-600">
                                    <span class="ml-2 text-sm text-gray-700">‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠</span>
                                </label>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button onclick="editNotice('${notice.id}')" class="text-blue-600 hover:text-blue-900">
                                    <i data-lucide="edit-2" class="w-4 h-4"></i>
                                </button>
                                <button onclick="deleteNotice('${notice.id}')" class="text-red-600 hover:text-red-900">
                                    <i data-lucide="trash-2" class="w-4 h-4"></i>
                                </button>
                            </div>
                        </div>
                        <div class="text-sm text-gray-600 prose max-w-none">
                            ${notice.content}
                        </div>
                        <div class="text-xs text-gray-500 mt-2">
                            ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${new Date(notice.createdAt).toLocaleDateString('th-TH')}
                        </div>
                    </div>
                    `;
                }).join('');
            }
            
            // Re-initialize Lucide icons
            lucide.createIcons();
        }

        function openNoticeForm(notice = null) {
            const modal = document.getElementById('noticeFormModal');
            const title = document.getElementById('noticeFormTitle');
            const form = document.getElementById('noticeForm');
            
            if (notice) {
                title.textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®';
                document.getElementById('noticeId').value = notice.id;
                document.getElementById('noticeTitle').value = notice.title;
                document.getElementById('noticePosition').value = notice.position || 'bottom';
                document.getElementById('noticeType').value = notice.type || 'warning';
                if (quillEditor) {
                    quillEditor.root.innerHTML = notice.content;
                }
            } else {
                title.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÉ‡∏´‡∏°‡πà';
                form.reset();
                document.getElementById('noticePosition').value = 'bottom';
                document.getElementById('noticeType').value = 'warning';
                if (quillEditor) {
                    quillEditor.root.innerHTML = '';
                }
            }
            
            modal.classList.remove('hidden');
        }

        function closeNoticeForm() {
            document.getElementById('noticeFormModal').classList.add('hidden');
        }

        function editNotice(noticeId) {
            const notice = config.notices.find(n => n.id === noticeId);
            if (notice) {
                openNoticeForm(notice);
            }
        }

        function deleteNotice(noticeId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ô‡∏µ‡πâ?')) {
                config.notices = config.notices.filter(n => n.id !== noticeId);
                loadNoticesList();
                
                showNotification('‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤)', 'success');
            }
        }

        function toggleNotice(noticeId) {
            const notice = config.notices.find(n => n.id === noticeId);
            if (notice) {
                notice.active = !notice.active;
                
                showNotification(notice.active ? '‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡πâ‡∏ß (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤)' : '‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÅ‡∏•‡πâ‡∏ß (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤)', 'success');
            }
        }

        function saveNotice(formData) {
            console.log('üìù Saving notice...');
            const noticeId = document.getElementById('noticeId').value;
            const content = quillEditor.root.innerHTML;
            
            console.log('üìã Notice ID:', noticeId);
            console.log('üìã Title:', formData.get('title'));
            console.log('üìã Position:', formData.get('position'));
            console.log('üìã Type:', formData.get('type'));
            
            if (noticeId) {
                // Edit existing notice
                const noticeIndex = config.notices.findIndex(n => n.id === noticeId);
                if (noticeIndex !== -1) {
                    config.notices[noticeIndex] = {
                        ...config.notices[noticeIndex],
                        title: formData.get('title'),
                        content: content,
                        position: formData.get('position'),
                        type: formData.get('type')
                    };
                }
            } else {
                // Add new notice
                const newNotice = {
                    id: generateNoticeId(),
                    title: formData.get('title'),
                    content: content,
                    position: formData.get('position'),
                    type: formData.get('type'),
                    active: false,
                    createdAt: new Date().toISOString()
                };
                config.notices.push(newNotice);
            }
            
            closeNoticeForm();
            loadNoticesList();
            
            showNotification(noticeId ? '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤)' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤)', 'success');
        }

        // Authentication functions
        function checkAuthentication() {
            const session = localStorage.getItem('canvas39_session') || sessionStorage.getItem('canvas39_session');
            if (!session) {
                window.location.href = 'login.html';
                return null;
            }
            
            try {
                return JSON.parse(session);
            } catch (error) {
                localStorage.removeItem('canvas39_session');
                sessionStorage.removeItem('canvas39_session');
                window.location.href = 'login.html';
                return null;
            }
        }

        function logout() {
            localStorage.removeItem('canvas39_session');
            sessionStorage.removeItem('canvas39_session');
            window.location.href = 'login.html';
        }

        function updateUserInfo(session) {
            if (session) {
                document.getElementById('currentUserName').textContent = session.name || session.username;
            }
        }

        // User Management Functions
        function getUsers() {
            const users = localStorage.getItem('canvas39_users');
            return users ? JSON.parse(users) : [];
        }

        function saveUsers(users) {
            localStorage.setItem('canvas39_users', JSON.stringify(users));
        }

        function generateUserId() {
            const users = getUsers();
            return users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1;
        }

        function loadUsersTable() {
            const users = getUsers();
            const tbody = document.getElementById('usersTableBody');
            
            tbody.innerHTML = users.map(user => `
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${user.username}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${user.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${user.email}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
                            user.role === 'admin' ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'
                        }">
                            ${user.role === 'admin' ? '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö' : '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${new Date(user.createdAt).toLocaleDateString('th-TH')}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="editUser(${user.id})" class="text-blue-600 hover:text-blue-900 mr-3">
                            <i data-lucide="edit-2" class="w-4 h-4"></i>
                        </button>
                        ${users.length > 1 ? `
                            <button onclick="deleteUser(${user.id})" class="text-red-600 hover:text-red-900">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                            </button>
                        ` : ''}
                    </td>
                </tr>
            `).join('');
            
            // Re-initialize Lucide icons
            lucide.createIcons();
        }

        function openUserModal() {
            document.getElementById('userManagementModal').classList.remove('hidden');
            loadUsersTable();
        }

        function closeUserModal() {
            document.getElementById('userManagementModal').classList.add('hidden');
        }

        function openUserForm(user = null) {
            const modal = document.getElementById('userFormModal');
            const title = document.getElementById('userFormTitle');
            const form = document.getElementById('userForm');
            
            if (user) {
                title.textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
                document.getElementById('userId').value = user.id;
                document.getElementById('userFormUsername').value = user.username;
                document.getElementById('userFormName').value = user.name;
                document.getElementById('userFormEmail').value = user.email;
                document.getElementById('userFormPassword').value = '';
                document.getElementById('userFormRole').value = user.role;
                document.getElementById('userFormPassword').required = false;
            } else {
                title.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
                form.reset();
                document.getElementById('userFormPassword').required = true;
            }
            
            modal.classList.remove('hidden');
        }

        function closeUserForm() {
            document.getElementById('userFormModal').classList.add('hidden');
        }

        function editUser(userId) {
            const users = getUsers();
            const user = users.find(u => u.id === userId);
            if (user) {
                openUserForm(user);
            }
        }

        function deleteUser(userId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ?')) {
                let users = getUsers();
                users = users.filter(u => u.id !== userId);
                saveUsers(users);
                loadUsersTable();
                showNotification('‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
            }
        }

        function saveUser(formData) {
            let users = getUsers();
            const userId = formData.get('userId');
            
            if (userId) {
                // Edit existing user
                const userIndex = users.findIndex(u => u.id === parseInt(userId));
                if (userIndex !== -1) {
                    users[userIndex] = {
                        ...users[userIndex],
                        username: formData.get('username'),
                        name: formData.get('name'),
                        email: formData.get('email'),
                        role: formData.get('role')
                    };
                    
                    // Update password if provided
                    if (formData.get('password')) {
                        users[userIndex].password = formData.get('password');
                    }
                }
            } else {
                // Add new user
                const newUser = {
                    id: generateUserId(),
                    username: formData.get('username'),
                    name: formData.get('name'),
                    email: formData.get('email'),
                    password: formData.get('password'),
                    role: formData.get('role'),
                    createdAt: new Date().toISOString()
                };
                users.push(newUser);
            }
            
            saveUsers(users);
            closeUserForm();
            loadUsersTable();
            showNotification(userId ? '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', async function() {
            // Check authentication first
            const session = checkAuthentication();
            if (!session) return;
            
            updateUserInfo(session);
            await loadConfig();
            
            // Initialize Quill Editor after a short delay
            setTimeout(initQuillEditor, 500);
            
            // Font selection
            const fontSelect = document.getElementById('fontSelect');
            if (fontSelect) {
                fontSelect.addEventListener('change', function() {
                    config.font = this.value;
                });
            }
            
            // Theme Color Controls (‡πÄ‡∏ö‡∏≤‡πÅ‡∏•‡∏∞‡∏á‡πà‡∏≤‡∏¢)
            initializeColorTheme();
            
            // Weather API selection
            const weatherApiSelect = document.getElementById('weatherApiSelect');
            if (weatherApiSelect) {
                weatherApiSelect.addEventListener('change', function() {
                    config.weatherApi = this.value;
                    toggleOpenWeatherKey();
                });
            }
            
            // OpenWeather API key
            const openweatherKey = document.getElementById('openweatherKey');
            if (openweatherKey) {
                openweatherKey.addEventListener('input', function() {
                    config.openweatherKey = this.value;
                });
            }
            
            // AQI source selection
            const aqiSourceSelect = document.getElementById('aqiSourceSelect');
            if (aqiSourceSelect) {
                aqiSourceSelect.addEventListener('change', function() {
                    config.aqiSource = this.value;
                    updateAQIStatus();
                });
            }
            
            // Update interval
            const updateInterval = document.getElementById('updateInterval');
            if (updateInterval) {
                updateInterval.addEventListener('change', function() {
                    config.updateInterval = parseInt(this.value);
                });
            }
            
            // Slideshow settings
            const slideshowEnabled = document.getElementById('slideshowEnabled');
            if (slideshowEnabled) {
                slideshowEnabled.addEventListener('change', function() {
                    config.slideshow.enabled = this.checked;
                });
            }
            
            const slideshowInterval = document.getElementById('slideshowInterval');
            if (slideshowInterval) {
                slideshowInterval.addEventListener('change', function() {
                    config.slideshow.interval = parseInt(this.value);
                });
            }
            
            const showAirQuality = document.getElementById('showAirQuality');
            if (showAirQuality) {
                showAirQuality.addEventListener('change', function() {
                    config.slideshow.showAirQuality = this.checked;
                });
            }
            
            const showPoolWater = document.getElementById('showPoolWater');
            if (showPoolWater) {
                showPoolWater.addEventListener('change', function() {
                    config.slideshow.showPoolWater = this.checked;
                });
            }
            
            // Section title inputs
            const sectionTitleInputs = ['todayText', 'outlookText', 'airQualityText', 'poolWaterText', 'indoorText', 'outdoorText'];
            sectionTitleInputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', function() {
                        if (!config.sectionTitles) config.sectionTitles = {};
                        config.sectionTitles[inputId] = this.value;
                    });
                }
            });
            
            // File uploads
            const logoUpload = document.getElementById('logoUpload');
            if (logoUpload) {
                logoUpload.addEventListener('change', handleLogoUpload);
            }
            const buildingUpload = document.getElementById('buildingUpload');
            if (buildingUpload) {
                buildingUpload.addEventListener('change', handleBuildingUpload);
            }
            
            // Buttons
            const saveBtn = document.getElementById('saveBtn');
            if (saveBtn) {
                saveBtn.addEventListener('click', function(e) {
                    console.log('üíæ Save button clicked!');
                    e.preventDefault();
                    saveConfig();
                });
            }
            
            // User Menu
            const userMenuBtn = document.getElementById('userMenuBtn');
            if (userMenuBtn) {
                userMenuBtn.addEventListener('click', function() {
                    const menu = document.getElementById('userMenu');
                    if (menu) {
                        menu.classList.toggle('hidden');
                    }
                });
            }
            
            // User Management
            const userManagementBtn = document.getElementById('userManagementBtn');
            if (userManagementBtn) {
                userManagementBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const userMenu = document.getElementById('userMenu');
                    if (userMenu) {
                        userMenu.classList.add('hidden');
                    }
                    openUserModal();
                });
            }
            
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    logout();
                });
            }
            
            // User Management Modal
            const closeUserModal_btn = document.getElementById('closeUserModal');
            if (closeUserModal_btn) {
                closeUserModal_btn.addEventListener('click', closeUserModal);
            }
            const addUserBtn = document.getElementById('addUserBtn');
            if (addUserBtn) {
                addUserBtn.addEventListener('click', () => openUserForm());
            }
            
            // User Form Modal
            const closeUserFormModal = document.getElementById('closeUserFormModal');
            if (closeUserFormModal) {
                closeUserFormModal.addEventListener('click', closeUserForm);
            }
            const cancelUserForm = document.getElementById('cancelUserForm');
            if (cancelUserForm) {
                cancelUserForm.addEventListener('click', closeUserForm);
            }
            
            const userForm = document.getElementById('userForm');
            if (userForm) {
                userForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                
                // Validate username uniqueness
                const users = getUsers();
                const userId = formData.get('userId');
                const username = formData.get('username');
                const existingUser = users.find(u => u.username === username && u.id !== parseInt(userId));
                
                if (existingUser) {
                    showNotification('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß', 'error');
                    return;
                }
                
                saveUser(formData);
                });
            }
            
            // Close modals when clicking outside
            const userManagementModal = document.getElementById('userManagementModal');
            if (userManagementModal) {
                userManagementModal.addEventListener('click', function(e) {
                    if (e.target === this) closeUserModal();
                });
            }
            
            const userFormModal = document.getElementById('userFormModal');
            if (userFormModal) {
                userFormModal.addEventListener('click', function(e) {
                    if (e.target === this) closeUserForm();
                });
            }
            
            // Notice Management
            const addNoticeBtn = document.getElementById('addNoticeBtn');
            if (addNoticeBtn) {
                addNoticeBtn.addEventListener('click', () => openNoticeForm());
            }
            const closeNoticeFormModal = document.getElementById('closeNoticeFormModal');
            if (closeNoticeFormModal) {
                closeNoticeFormModal.addEventListener('click', closeNoticeForm);
            }
            const cancelNoticeForm = document.getElementById('cancelNoticeForm');
            if (cancelNoticeForm) {
                cancelNoticeForm.addEventListener('click', closeNoticeForm);
            }
            
            const noticeForm = document.getElementById('noticeForm');
            if (noticeForm) {
                noticeForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const formData = new FormData(this);
                    saveNotice(formData);
                });
            }
            
            const noticeFormModal = document.getElementById('noticeFormModal');
            if (noticeFormModal) {
                noticeFormModal.addEventListener('click', function(e) {
                    if (e.target === this) closeNoticeForm();
                });
            }
            
            // Close user menu when clicking outside
            document.addEventListener('click', function(e) {
                const userMenu = document.getElementById('userMenu');
                const userMenuBtn = document.getElementById('userMenuBtn');
                
                if (!userMenuBtn.contains(e.target) && !userMenu.contains(e.target)) {
                    userMenu.classList.add('hidden');
                }
            });
            
            // Initial status update
            updateStatus();
            
            // Update status every 30 seconds
            setInterval(updateStatus, 30000);
        });

        // Handle logo upload
        function handleLogoUpload(event) {
            console.log('üñºÔ∏è Logo upload started');
            const file = event.target.files[0];
            if (file) {
                console.log('üìÅ Logo file selected:', file.name, 'Size:', file.size);
                
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå (‡∏à‡∏≥‡∏Å‡∏±‡∏î 500KB)
                if (file.size > 500000) {
                    showNotification('‚ùå ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 500KB', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    console.log('‚úÖ Logo read successfully');
                    
                    // ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö logo (‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á)
                        const maxWidth = 100;
                        const maxHeight = 100;
                        let { width, height } = img;
                        
                        if (width > height) {
                            if (width > maxWidth) {
                                height = height * (maxWidth / width);
                                width = maxWidth;
                            }
                        } else {
                            if (height > maxHeight) {
                                width = width * (maxHeight / height);
                                height = maxHeight;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        
                        // ‡πÑ‡∏°‡πà‡πÄ‡∏ï‡∏¥‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // ‡πÉ‡∏ä‡πâ PNG ‡πÄ‡∏™‡∏°‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö logo ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ (quality ‡∏ï‡πà‡∏≥‡∏•‡∏á)
                        const compressedDataUrl = canvas.toDataURL('image/png', 0.5);
                        console.log('üóúÔ∏è Logo compressed from', file.size, 'to', compressedDataUrl.length);
                        
                        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï preview
                        const logoPreview = document.getElementById('logoPreview');
                        if (logoPreview) logoPreview.src = compressedDataUrl;
                        
                        config.images.logo = compressedDataUrl;
                        const originalFormat = file.type === 'image/png' ? 'PNG' : 'JPEG‚ÜíPNG';
                        showNotification(`üñºÔ∏è ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß (${originalFormat} ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™) - ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤`, 'success');
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        // Handle building upload
        function handleBuildingUpload(event) {
            console.log('üè¢ Building upload started');
            const file = event.target.files[0];
            if (file) {
                console.log('üìÅ Building file selected:', file.name, 'Size:', file.size);
                
                // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå (‡∏à‡∏≥‡∏Å‡∏±‡∏î 800KB)
                if (file.size > 800000) {
                    showNotification('‚ùå ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ! ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 800KB', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    console.log('‚úÖ Building image read successfully');
                    
                    // ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        
                        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö building (‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á)
                        const maxWidth = 400;
                        const maxHeight = 300;
                        let { width, height } = img;
                        
                        if (width > height) {
                            if (width > maxWidth) {
                                height = height * (maxWidth / width);
                                width = maxWidth;
                            }
                        } else {
                            if (height > maxHeight) {
                                width = width * (maxHeight / height);
                                height = maxHeight;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        
                        // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö building - ‡πÄ‡∏ï‡∏¥‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™
                        if (file.type === 'image/png') {
                            ctx.fillStyle = 'white';
                            ctx.fillRect(0, 0, width, height);
                        }
                        
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // ‡πÉ‡∏ä‡πâ JPEG ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö building image ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î
                        const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.8);
                        console.log('üóúÔ∏è Building image compressed from', file.size, 'to', compressedDataUrl.length);
                        
                        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï preview
                        const buildingPreview = document.getElementById('buildingPreview');
                        if (buildingPreview) buildingPreview.src = compressedDataUrl;
                        
                        config.images.building = compressedDataUrl;
                        showNotification('üè¢ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡∏ñ‡∏π‡∏Å‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡πâ‡∏ß) - ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤', 'success');
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        // Update AQI status
        function updateAQIStatus() {
            const aqiStatus = document.getElementById('aqiStatus');
            const source = config.aqiSource;
            
            if (source === 'mock') {
                aqiStatus.className = 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800';
                aqiStatus.innerHTML = '<div class="w-1.5 h-1.5 bg-yellow-400 rounded-full mr-1"></div>Mock Data';
            } else if (source === 'scraping') {
                aqiStatus.className = 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800';
                aqiStatus.innerHTML = '<div class="w-1.5 h-1.5 bg-green-400 rounded-full mr-1"></div>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á';
            } else {
                aqiStatus.className = 'inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800';
                aqiStatus.innerHTML = '<div class="w-1.5 h-1.5 bg-blue-400 rounded-full mr-1"></div>IQAir API';
            }
        }

        // Update system status
        function updateStatus() {
            // Update last update time
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString('th-TH');
            
            // Mock current data (in real system, this would fetch from APIs)
            document.getElementById('currentTemp').textContent = '31¬∞C';
            document.getElementById('currentIndoorAQI').textContent = '40 (Good)';
            document.getElementById('currentOutdoorAQI').textContent = '84 (Moderate)';
        }
        
        // Smooth scroll to section function
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId + '-section');
            const navContainer = document.querySelector('.nav-cards-container');
            
            if (element && navContainer) {
                // Remove active state from all cards
                document.querySelectorAll('.nav-card').forEach(card => {
                    card.classList.remove('active');
                });
                
                // Add active state to clicked card
                const targetCard = document.querySelector(`[data-target="${sectionId}"]`);
                if (targetCard) {
                    targetCard.classList.add('active');
                }
                
                // Calculate offset to account for sticky navigation
                const navHeight = navContainer.offsetHeight;
                const elementTop = element.offsetTop - navHeight - 20; // 20px extra margin
                
                // Smooth scroll with offset
                window.scrollTo({
                    top: elementTop,
                    behavior: 'smooth'
                });
                
                // Add temporary highlight effect to section
                element.style.transition = 'box-shadow 0.3s ease';
                element.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.3)';
                setTimeout(() => {
                    element.style.boxShadow = '';
                }, 2000);
                
                console.log(`üìç Navigated to ${sectionId} section`);
            }
        }

    </script>
</body>
</html>